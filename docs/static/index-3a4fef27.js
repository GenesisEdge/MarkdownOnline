import{c as st}from"./react-dom-d3bdc6a0.js";import{T as ue,Z as lt,c as xe,p as ct,D as dt,a as mt,b as ut,d as gt,e as pt,B as A,f as ye,g as Be,I as ge,h as Ke,i as Oe,j as ft,G as Ce,s as O,k as ht,S as wt,l as bt,t as ze,m as xt,n as yt,o as B,u as vt,q as kt,r as Ct,v as Et,C as It,w as St,x as R,y as Ee,z as Tt,A as He,E as Mt,F as Rt,H as Ve,R as jt,J as We,K as Ge,L as Lt,M as $t,N as At,O as _t,P as Pt,Q as Nt,U as Ft,V as W,W as G,X as U,Y as q,_ as Dt,$ as J,a0 as Bt,a1 as Kt,a2 as Ot,a3 as zt,a4 as Ht,a5 as pe,a6 as fe}from"./@mui-ea53a646.js";import{o as _}from"./mobx-react-1c6baff6.js";import{k as Ue}from"./bigonion-kit-f58b431d.js";import{c as Vt}from"./clsx-0839fdbe.js";import{l as Ie,F as Wt}from"./@monaco-editor-863e66c9.js";import{R as Gt}from"./react-resizable-8f73e4ed.js";import"./react-2b221fbb.js";import"./@babel-f8d566ba.js";import"./@emotion-d13e5fae.js";import"./hoist-non-react-statics-3f8ebaa8.js";import"./stylis-79144faa.js";import"./react-is-e5978b8b.js";import"./react-transition-group-bc100b23.js";import"./@popperjs-61ffd834.js";import"./prop-types-7395632d.js";import"./mobx-3741033e.js";import"./mobx-react-lite-1ad052b5.js";import"./use-sync-external-store-b84fba6b.js";import"./state-local-dd516420.js";import"./react-draggable-b033082a.js";(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))i(r);new MutationObserver(r=>{for(const a of r)if(a.type==="childList")for(const o of a.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&i(o)}).observe(document,{childList:!0,subtree:!0});function n(r){const a={};return r.integrity&&(a.integrity=r.integrity),r.referrerPolicy&&(a.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?a.credentials="include":r.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function i(r){if(r.ep)return;r.ep=!0;const a=n(r);fetch(r.href,a)}})();const Ut="modulepreload",qt=function(e,t){return new URL(e,t).href},Se={},ve=function(t,n,i){if(!n||n.length===0)return t();const r=document.getElementsByTagName("link");return Promise.all(n.map(a=>{if(a=qt(a,i),a in Se)return;Se[a]=!0;const o=a.endsWith(".css"),s=o?'[rel="stylesheet"]':"";if(!!i)for(let c=r.length-1;c>=0;c--){const u=r[c];if(u.href===a&&(!o||u.rel==="stylesheet"))return}else if(document.querySelector(`link[href="${a}"]${s}`))return;const m=document.createElement("link");if(m.rel=o?"stylesheet":Ut,o||(m.as="script",m.crossOrigin=""),m.href=a,document.head.appendChild(m),o)return new Promise((c,u)=>{m.addEventListener("load",c),m.addEventListener("error",()=>u(new Error(`Unable to preload CSS for ${a}`)))})})).then(()=>t()).catch(a=>{const o=new Event("vite:preloadError",{cancelable:!0});if(o.payload=a,window.dispatchEvent(o),!o.defaultPrevented)throw a})},Q=["fastly.jsdelivr.net","cdn.jsdelivr.net","jsd.onmicrosoft.cn"];function Jt(){window._cdn={failed:[],index:0,cdn:Q}}async function d(e){if(e.length===0)throw new Error("A non-empty array of URLs must be provided.");let t=new URL(e);try{for(let n=0;n<=Q.length-1;n++){if(!window._cdn.failed.includes(Q[n]))return t.host=window._cdn.cdn[n],await ve(()=>import(t.toString()),[],import.meta.url);n===Q.length-1&&console.error("GG")}}catch{return window._cdn.failed.includes(t.host)||window._cdn.failed.push(t.host),d(t.toString())}throw new Error("Failed to load module from all provided URLs.")}function Xt(){Jt()}Xt();function P(e,t,n=window.editor,i=window.monaco){const r=window.editor,a=e,o=window.editor.getSelections()[0];r.executeEdits("img-insert",[{range:new window.monaco.Range(o.startLineNumber,o.startColumn,o.endLineNumber,o.endColumn),text:a,forceMoveMarkers:t}])}function Yt(e){navigator.clipboard.writeText(e).catch(t=>{console.error("Failed to copy text: ",t)})}const Zt=(await d("https://cdn.jsdmirror.com/npm/react-photo-view-cdn@0.0.1/esm/react-photo-view.module.js")).PhotoProvider,Qt=(await d("https://cdn.jsdmirror.com/npm/react-photo-view-cdn@0.0.1/esm/react-photo-view.module.js")).PhotoView,T=window.React,en=T.forwardRef(tn);function tn(e,t){let n="FLEX JUS-CENTER ",i={width:"fitContent"};const[r,a]=T.useState(!1);function o(m){m.altKey&&Yt(`![我是图片](/vf/${e.uuid})`),m.ctrlKey&&P(`![我是图片](/vf/${e.uuid})`,!0)}let[s,l]=T.useState({src:e.src,uuid:e.uuid,magic:e.magic!=0,className:n+(e.className??""),style:e.style?{...e.style,...i}:i});return T.createElement(T.Fragment,null,T.createElement("div",{...s,...e,ref:t,className:s.className,style:s.style},T.createElement(Zt,null,T.createElement(Qt,{triggers:["onDoubleClick"],src:s.src},T.createElement(ue,{placement:"right",TransitionComponent:lt,arrow:!0,title:"按住Ctrl点击插入"},T.createElement("img",{onMouseEnter:()=>{a(!0)},onMouseLeave:()=>{a(!1)},onClick:m=>{o(m)},style:{width:"70%",transition:" 0.2s ease-in-out",borderRadius:"5px",transform:r?"translate(0px, -2px)":"",boxShadow:r?"1vh 2vh 21px rgb(79 79 79)":"rgb(216 216 216) 1vh 2vh 21px"},src:s.src,alt:"error"}))))))}const nn=(await d("https://cdn.jsdmirror.com/npm/mobx@6.12.0/+esm")).observable,rn=(await d("https://cdn.jsdmirror.com/npm/mobx@6.12.0/+esm")).makeAutoObservable;class an{displayState=!1;constructor(t){rn(this,{displayState:nn}),this.displayState=t}display(){this.displayState=!0}hidden(){this.displayState=!1}}const on=new an(!1),sn=()=>on,z=(await d("https://cdn.jsdelivr.net/npm/react-photo-view-cdn@0.0.4/esm/db.min.js")).openDB,ln=(await d("https://cdn.jsdelivr.net/npm/react-photo-view-cdn@0.0.4/esm/db.min.js")).cursorGetDataByIndex,qe=(await d("https://cdn.jsdelivr.net/npm/react-photo-view-cdn@0.0.4/esm/db.min.js")).cursorGetData,Je=(await d("https://cdn.jsdelivr.net/npm/react-photo-view-cdn@0.0.4/esm/db.min.js")).updateDB;function cn(e){z("md_content",2).then(t=>{Je(t,"users_md",{uuid:1,contentText:e})})}async function Xe(){return new Promise(e=>{z("md_content",2).then(t=>{qe(t,"users_md").then(n=>{e(n)})})})}function dn(e,t){z("md_content",2).then(n=>{for(let i=0;i<=e.length-1;i++){let r={uuid:t+i,imgBase64:e[i]};Je(n,"users_img",r)}})}async function mn(e,t){return new Promise(n=>{z("md_content",2).then(i=>{ln(i,"users_img",e,t).then(r=>{n(r)})})})}async function un(){return new Promise(e=>{z("md_content",2).then(t=>{qe(t,"users_img").then(n=>{e(n)})})})}const M=window.React;function gn(e){const t=M.Children.toArray(e.children).length;let n="LR ",i={display:"flex",flexDirection:"row",justifyContent:e.jus??"center",alignItems:e.ali??"center",width:"100%",height:"100%"},[r,a]=M.useState({style:e.style?{...e.style,...i}:i,className:n+(e.className??""),space:e.space??void 0,order:[]}),[o,s]=M.useState({marginRight:"5px",width:"100%",height:"100%"});return M.createElement(M.Fragment,null,M.createElement("div",{...r,...e,className:r.className,style:r.style},M.Children.map(e.children,(l,m)=>m==t-1?M.createElement("div",{style:{...o,flex:r.space?"auto":void 0}},l):M.createElement("div",{style:{...o,order:`${r.order[m]}`,flex:`0 0 ${r.space?r.space[m]:void 0}%`}},l))))}const X=window.React;function ie(e){let t="Box ",n={display:"flex",flexDirection:e.dir??"row",justifyContent:e.jus??"center",alignItems:e.ali??"center",width:e.min==1?"fitContent":"100%",height:e.min==1?"fitContent":"100%",transform:e.move?`translate(${e.move?.x??0}, ${e.move?.y??0})`:void 0},[i,r]=X.useState({style:e.style?{...e.style,...n}:n,className:t+(e.className??""),space:e.space??void 0,order:[]});return X.createElement(X.Fragment,null,X.createElement("div",{...i,...e,className:i.className,style:i.style},e.children))}function pn(e){let t=window.indexedDB.deleteDatabase(e);t.onerror=function(n){console.log("删除失败")},t.onsuccess=function(n){console.log("删除成功")}}const p=window.React,fn=xe({palette:{primary:{main:"#1976d2"},secondary:ct}}),hn=_(e=>{const t=sn(),[n,i]=p.useState(!1),[r,a]=p.useState([]),[o,s]=p.useState(!1);function l(){s(!0)}return p.useEffect(()=>{un().then(m=>{a(m)})}),p.useEffect(()=>{i(t.displayState)},[t.displayState]),p.createElement(p.Fragment,null,p.createElement(dt,{open:o,onClose:()=>{s(!1)}},p.createElement(mt,{id:"alert-dialog-title"},"Ready to delete all the images?"),p.createElement(ut,null,p.createElement(gt,{id:"alert-dialog-description"},'Once you have clicked the "yes" button, your pictures and your text will be deleted!')),p.createElement(pt,null,p.createElement(A,{onClick:()=>{s(!1),pn("md_content"),window.location.reload()}},"YES"),p.createElement(A,{onClick:()=>{s(!1)},autoFocus:!0},"NO"))),p.createElement(ye,{anchor:"bottom",open:n,elevation:16,onClose:()=>{t.hidden()}},p.createElement("div",{style:{height:"60svh"}},p.createElement("div",null,p.createElement(Be,{theme:fn},p.createElement(ie,null,p.createElement(gn,{space:[90]},p.createElement(ie,{min:1,move:{x:"5svw"}},p.createElement("p",null,"图片管理器"),p.createElement(ue,{title:p.createElement("div",null,"管理粘贴上传的图片",p.createElement("ul",{style:{margin:"2px"}},p.createElement("li",null,"按住Ctrl点击图片插入"),p.createElement("li",null,"双击图片放大预览"),p.createElement("li",null,"按住Alt点击图片复制图片")))},p.createElement(ge,null,p.createElement(Ke,{color:"primary"})))),p.createElement(ie,null,p.createElement(ue,{title:"删除全部图片和储存的文字"},p.createElement(ge,{onClick:l},p.createElement(Oe,{color:"primary"})))))))),p.createElement(ft,{style:{marginBottom:"1.3svh"}}),p.createElement(Ce,{container:!0,rowSpacing:5,columns:16},r?r.map((m,c)=>p.createElement(Ce,{id:m.uuid,key:m.uuid,xs:8},p.createElement(en,{magic:0,src:m.imgBase64,uuid:m.uuid}))):void 0))))});function ne(){return window.editor?.getValue?window.editor.getValue():"null"}function Sa(e="view-area"){let t=document.getElementById(e);if(t)return t.innerHTML}function wn(e){let t=/\|---\|/g;return e=e.replace(t,()=>'<div style="page-break-after: always;"></div>'),e}const bn=`[TOC]\r
\r
## 新一代的“Markdown”编辑器\r
\r
## 一、小贴士😀\r
\r
1. 如果你还不清楚什么是markdown的话请移步[markdown简介](https://markdown.com.cn/cheat-sheet.html#总览), 下面是一些简短的介绍：\r
   - 左边是源代码\r
   - 右边是渲染出来的结果\r
   - 试着在新的一行打出一个# 你好, 在右边就会发现变成标题了！\r
2. 在新的一行打一个斜杠字符：\`/\`，即可看到流程图、代码块等快捷提示！\r
3. 鼠标右键也可发现新大陆( •̀ ω •́ )✧\r
4. 导出为PDF在右上角更多里，直接按下\`Ctrl + P\`也可以哦\r
5. 快捷键完备，试着按下他们吧！\r
   - \`Ctrl + V\` 上传复制和截图的JPG、PNG格式图片\r
   - \`Ctrl + Z\` 撤回编辑\r
   - \`Ctrl + F\` 查找与替换\r
   - \`Ctrl + E/R\` 文本居中/右\r
   - \`Ctrl + B\` 文本加粗\r
   - \`Ctrl + U\` 下划线\r
   - \`Ctrl + I\` 文本斜体\r
   - \`Ctrl + 1-4\` 1-4级标题\r
   - \`\` Ctrl + \` \`\` 删除线\r
   - \`Ctrl + Q\` 同步滚动\r
   - \`Ctrl + Shift + F\` 文件管理器\r
   - \`Ctrl + S\` 保存\r
   - \`Ctrl + M\` 插入一个LaTex代码块\r
   - \`Shift + Alt + F\` 格式化Markdown\r
   - \`Ctrl + Alt + V\` 语音转文字\r
   - 更多快捷键，敬请期待...\r
\r
## 二、下面是一些常用的Makrdown语法\r
\r
你好，我是表情包😅\r
\r
我是脚注 [^1] 就是引经据典的那种脚注 [^2]，就是点一下就会跳转到最下面解释的那种！！！\r
\r
你好，我是带语法提示的LaTex！试着在两个\`$$ $$\`中间打一个斜杠吧，如果你不清楚LaTex公式的语法，请移步[LaTex公示表](https://blog.csdn.net/Yushan_Ji/article/details/134322574)\r
\r
$$\r
\\lambda+1=\\lambda^3-1\r
$$\r
\r
[我是链接](https://bigonion.cn)\r
\r
## 三、一些扩展的东西✨\r
\r
对，就在下面，打一个斜杠/，再打flow，回车！\r
\r
\`\`\`mermaid\r
flowchart TB\r
Start --> Stop\r
\`\`\`\r
\r
## 四、关于我和这个项目\r
\r
https://github.com/LiWeny16/MarkdownOnline\r
\r
[^1]: 就是解释一些东西的脚注啦！\r
[^2]: 这是第二个脚注！\r
`;function xn(){return new Promise(e=>{Xe().then(t=>{t.length&&t[0].contentText?(window.editor.setValue(t[0].contentText),e()):(window.editor.setValue(bn),e())})})}class Ye{version="0.2";setItem(t,n){localStorage.setItem(t,n)}getItem(t){return localStorage.getItem(t)?localStorage.getItem(t):""}removeItem(t){localStorage.removeItem(t)}}const yn=(await d("https://cdn.jsdmirror.com/npm/mobx@6.12.0/+esm")).makeAutoObservable,F=(await d("https://cdn.jsdmirror.com/npm/mobx@6.12.0/+esm")).observable;class vn{themeState;fileManagerState;emojiPickerState;contextMenuClickPosition;settingsConfig;constructor({themeState:t,fileManagerState:n,emojiPickerState:i,contextMenuClickPosition:r,settingsConfig:a}){yn(this,{themeState:F,fileManagerState:F,emojiPickerState:F,contextMenuClickPosition:F,settingsConfig:F}),this.themeState=t,this.fileManagerState=n,this.emojiPickerState=i,this.contextMenuClickPosition=r,this.settingsConfig=a}getAllConfig(){let t={};return Object.getOwnPropertyNames(this).forEach((n,i)=>{t[n]=this[n]}),t}}function kn(e,t){const n=function(i,r,a,o,s){let l;return(i[r].map&&i[r].level===0||i[r].type==="list_item_open")&&(l=i[r].map[0],i[r].attrSet("data-line",String(l))),s.renderToken(i,r,a)};e.renderer.rules.paragraph_open=e.renderer.rules.heading_open=e.renderer.rules.table_open=e.renderer.rules.tr_open=e.renderer.rules.th_open=e.renderer.rules.bullet_list_open=e.renderer.rules.list_item_open=n}let Cn=function(e){e.core.ruler.before("inline","myrule",function(t){var n=t.tokens;for(let i=0;i<n.length;i++)n[i].content&&n[i].content.indexOf("MYRULE")})},En=function(e){e.renderer.rules.image,e.renderer.rules.image=function(t,n,i,r,a){const o=t[n],s="#";let l=o.attrs[o.attrIndex("src")][1],m=o.content;o&&o.attrGet("src")?.startsWith("/vf/")&&r.vfImgSrcArr&&(l=r.vfImgSrcArr[r.vfImgSeq++]);let c="auto",u="",f="L",k=m.split(s);if(k.length>1)for(let b=0;b<k.length;b++){let x=k[b];x==="s"&&(u+="box-shadow: rgb(199 199 199) 1vh 2vh 21px"),x==="s1"&&(u+="box-shadow: rgb(146 146 146) 1vh 2vh 21px;"),x==="s2"&&(u+="box-shadow: rgb(32 32 32 / 86%) 1vh 2vh 21px"),(x==="C"||x=="c")&&(f="C"),(x==="R"||x=="r")&&(f="R"),x.startsWith("w")&&(c=k[b].substring(1),c.endsWith("%")||(c+="px"))}return`<div class="imgBox-r FLEX  ${f=="C"?" JUS-CENTER":f=="R"?"JUS-RIGHT":""}" ><img class="img_resize_transition" width="${c}" style="${u}" src="${l}" alt="${m}">
    </div>`}};const In=(await d("https://cdn.jsdmirror.com/npm/mobx@6.12.0/+esm")).toJS;let K=new Ye;function Ta(e){e=="light"?(E().themeState="light",K.setItem("themeState","light")):(E().themeState="dark",K.setItem("themeState","dark"))}function L(){return E().themeState}function Te(e){e=="on"?(E().emojiPickerState="on",K.setItem("emojiPickerState","on")):(E().emojiPickerState="off",K.setItem("emojiPickerState","off"))}function Ze(){return E().emojiPickerState}function Sn(e){if(e.posx&&e.posy)E().contextMenuClickPosition=e;else return!1}function Ma(){return E().contextMenuClickPosition}function he(e){const t=$(),n=Tn(t,e);E().settingsConfig=n,K.setItem("settingsConfig",JSON.stringify(n))}function $(){return In(E().settingsConfig)}function Tn(e,t){for(const n in t)n in e?Object.assign(e[n],t[n]):e[n]=t[n];return e}function we(e){E().fileManagerState=e}function Qe(){return E().fileManagerState}const Mn=(await d("https://cdn.jsdmirror.com/npm/@highlightjs/cdn-assets@11.6.0/es/highlight.min.js")).default;let Rn=function(e){const t=e.renderer.rules.code_block;e.renderer.rules.fence=function(n,i,r,a,o){let s;n[i].map&&n[i].level===0&&(s=n[i].map[0],n[i].attrSet("data-line",String(s)));let l=n[i].info,m=n[i].content;if(m=m.replace(/</g,"&lt;").replace(/>/g,"&gt;"),l==="mermaid"){if(a.mermaidParsedArr)return`<div data-line="${s}" class="language-mermaid language-plaintext">
        ${a.mermaidParsedArr[a.mermaidSeq++]}
        </div>`}else return Mn.getLanguage(l)?`<pre class="language-code" data-line="${s}"><code class="language-${l} ${L()==="light"?"":"hljs-dark"}">${m}</code></pre>`:`<div class="code-container" data-line="${s}">
      <pre><code class="language-plaintext">${m}</code></pre>
    </div>`;return t(n,i,r,a,o)}},jn=function(e){function t(n){const i=n.tokens;for(let r=0;r<i.length;r++)if(i[r].type==="inline"){let a=i[r].children;for(let o=0;o<a.length;o++){const s=a[o];if(s.type==="text"&&s.content){const m=s.content.match(/\^(.*?)\^(.*?)\#$/);if(m){const c=new n.Token("html_block","",0);c.content=`<div class="${m[2]}">${e.render(m[1])}</div>`,a[o]=c,o++}}}}}e.core.ruler.push("my_rule1",t),e.inline.ruler.before("emphasis","mark",(n,i)=>!1)};function Ln(e){e.core.ruler.push("custom_align",function(t){let n=null;t.tokens.forEach((i,r)=>{if(i.type==="paragraph_open"){let a=t.tokens[r+1];a&&a.type==="inline"&&a.children.forEach(o=>{if(o.type==="text"){const s=o.content;switch(s.slice(-2)){case"||":o.content=s.slice(0,-2),n="C";break;case">>":o.content=s.slice(0,-2),n="R";break}}})}n&&i.type==="paragraph_open"&&(i.attrPush(["class",n]),n=null)})})}function $n(e){e.core.ruler.push("custom_align_heading",function(t){let n=null;t.tokens.forEach((i,r)=>{if(i.type==="heading_open"){let a=t.tokens[r+1];a&&a.type==="inline"&&a.children.forEach(o=>{if(o.type==="text"){const s=o.content;switch(s.slice(-2)){case"||":o.content=s.slice(0,-2),n="C";break;case">>":o.content=s.slice(0,-2),n="R";break}}})}n&&i.type==="heading_open"&&(i.attrPush(["class",n]),n=null)})})}function An(e,t,n=e.createDecorationsCollection()){document.getElementById("view-area").addEventListener("dblclick",function(i){let r=i.target,a=0;if(r!==this){for(;r;){if(r.hasAttribute("data-line")){a=parseInt(r.getAttribute("data-line"));break}r=r.parentElement}a&&(e.setPosition({lineNumber:a+1,column:1}),e.revealLineInCenter(a+1,1),n.clear(),n.set([{range:new t.Range(a+1,1,a+1,1),options:{isWholeLine:!0,className:"HILIGHT-MONACO",zIndex:0}}]))}})}const Me=window.katex;function Re(e,t){var n,i,r=e.posMax,a=!0,o=!0;return n=t>0?e.src.charCodeAt(t-1):-1,i=t+1<=r?e.src.charCodeAt(t+1):-1,(n===32||n===9||i>=48&&i<=57)&&(o=!1),(i===32||i===9)&&(a=!1),{can_open:a,can_close:o}}function _n(e,t){var n,i,r,a,o;if(e.src[e.pos]!=="$")return!1;if(a=Re(e,e.pos),!a.can_open)return t||(e.pending+="$"),e.pos+=1,!0;for(n=e.pos+1,i=n;(i=e.src.indexOf("$",i))!==-1;){for(o=i-1;e.src[o]==="\\";)o-=1;if((i-o)%2==1)break;i+=1}return i===-1?(t||(e.pending+="$"),e.pos=n,!0):i-n===0||i-n===2?(t||(e.pending+="$$"),e.pos=n+1,!0):(a=Re(e,i),a.can_close?(t||(r=e.push("math_inline","math",0),r.markup="$",r.content=e.src.slice(n,i)),e.pos=i+1,!0):(t||(e.pending+="$"),e.pos=n,!0))}function Pn(e,t,n,i){var r,a,o,s,l=!1,m,c=e.bMarks[t]+e.tShift[t],u=e.eMarks[t];if(c+2>u||e.src.slice(c,c+2)!=="$$")return!1;if(c+=2,r=e.src.slice(c,u),i)return!0;for(r.trim().slice(-2)==="$$"&&(r=r.trim().slice(0,-2),l=!0),o=t;!l&&(o++,!(o>=n||(c=e.bMarks[o]+e.tShift[o],u=e.eMarks[o],c<u&&e.tShift[o]<e.blkIndent)));)e.src.slice(c,u).trim().slice(-2)==="$$"&&(s=e.src.slice(0,u).lastIndexOf("$$"),a=e.src.slice(c,s),l=!0);return e.line=o+1,m=e.push("math_block","math",0),m.block=!0,m.content=(r&&r.trim()?r+`
`:"")+e.getLines(t+1,o,e.tShift[t],!0)+(a&&a.trim()?a:""),m.map=[t,e.line],m.markup="$$",!0}function Nn(e,t){t=t||{throwOnError:!1,strict:!1};var n=function(o){if(t.displayMode=!1,o)try{return Me.renderToString(o,t)}catch{return o}else return"Latex Missing"},i=function(o,s){return n(o[s].content)},r=function(o,s){t.displayMode=!0;let l;if(s.map&&s.level===0&&(l=s.map[0]),o)try{return`<p data-line=${String(l)}>`+Me.renderToString(o,t)+"</p>"}catch{return o}else return"LATEX MISSING"},a=function(o,s){return r(o[s].content,o[s])+`
`};e.inline.ruler.after("escape","math_inline",_n),e.block.ruler.after("blockquote","math_block",Pn,{alt:["paragraph","reference","blockquote","list"]}),e.renderer.rules.math_inline=i,e.renderer.rules.math_block=a}const Fn=(await d("https://cdn.jsdmirror.com/npm/@arco-design/web-react@2.62.0/+esm")).Notification,re=(e,t,n)=>{const i=n?.kind??"success",r=n?.position??"bottomRight";Fn[i]({title:e,content:t,position:r})},Dn=(await d("https://cdn.jsdmirror.com/npm/@highlightjs/cdn-assets@11.6.0/es/highlight.min.js")).default,ae=(await d("https://cdn.jsdmirror.com/npm/mermaid@10/dist/mermaid.esm.min.mjs")).default,Bn=(await d("https://cdn.jsdmirror.com/npm/markdown-it@8.4.2/+esm")).default,Kn=window.markdownitIncrementalDOM,On=(await d("https://cdn.jsdmirror.com/npm/markdown-it-multimd-table@4.2.3/+esm")).default,zn=(await d("https://cdn.jsdmirror.com/npm/markdown-it-github-toc@3.2.4/src/index.js/+esm")).default,Hn=(await d("https://cdn.jsdmirror.com/npm/@hackmd/markdown-it-task-lists@2.1.4/+esm")).default,Vn=(await d("https://cdn.jsdmirror.com/npm/markdown-it-emoji@3.0.0/+esm")).full,je=(await d("https://cdn.jsdmirror.com/npm/bigonion-kit@0.12.3/esm/kit.min.js")).default,Wn=(await d("https://cdn.jsdmirror.com/npm/markdown-it-footnote@4.0.0/+esm")).default;function ee(){return Bn({html:!0,linkify:!0,typographer:!0,breaks:!0}).use(kn).use(zn,{anchorLinkSymbol:"",anchorLinkBefore:!1}).use(Cn).use(En).use(On,{multiline:!0,rowspan:!0,headerless:!0,multibody:!0,aotolabel:!0}).use(Rn).use(jn).use(Wn).use(Ln).use($n).use(Vn).use(Nn).use(Hn).use(Kn)}class Gn{constructor(){}mermaidInit(){const t={securityLevel:"loose",logLevel:4,startOnLoad:!1,gantt:{fontSize:19,sectionFontSize:"16",numberSectionStyles:10,useMaxWidth:!0},theme:$().advanced.mermaidTheme};ae.parseError=n=>{},ae.initialize(t),ae.mermaidAPI.initialize(t)}hljsInit(){Dn.configure({ignoreUnescapedHTML:!0})}settingsAllInit(){this.mermaidInit(),this.hljsInit()}static newSettings(){return new this}}function Un(e=window.editor,t=window.monaco,n){new Gn().settingsAllInit(),xn().then(async()=>{await D(),n&&n(),await je.sleep(110),re("已更新到最新版本","当前版本:v2.2.1"),await je.sleep(680),re("当前版本新增特性","文件管理器",{kind:"info"}),re("Bug修复情况","修复增量渲染“<-”时会出现的问题",{kind:"info"})}),window._deco=e.createDecorationsCollection(),window._speechData={processing:!1,speechResult:"",speech:null},An(e,t,window._deco)}const te={themeState:"light",fileManagerState:!1,emojiPickerState:"off",contextMenuClickPosition:{posx:20,posy:20},settingsConfig:{basic:{syncScroll:!1,speechLanguage:"zh-CN",fileEditLocal:!0},advanced:{mermaidTheme:"default"}}},qn=[...Object.keys(te.settingsConfig.basic),...Object.keys(te.settingsConfig.advanced)];Object.keys(te.settingsConfig.advanced);const Ra=["default","forest","dark","neutral"],ja=["default (默认，才是最美的！)","forest (说真的，很绿)","dark (说真的，很黑)","neutral (清心寡欲，出家必选)"];function Jn(e){function t(r){typeof n[r]=="object"?i.setItem(r,JSON.stringify(n[r])):i.setItem(r,n[r])}let n=e,i=new Ye;for(let r in n)if(i.getItem(r))if(r=="themeState"||r=="emojiPickerState"||r=="settingsConfig")try{if(typeof n[r]=="object"){const a=JSON.parse(i.getItem(r).toString());for(let o in a)Object.keys(a[o]).forEach(s=>{if(!qn.includes(s))return t(r),n});n[r]=JSON.parse(i.getItem(r).toString())}else n[r]=i.getItem(r).toString()}catch(a){console.log(a),t(r)}else t(r);else t(r);return n}const Xn=new vn(Jn(te)),E=()=>Xn,Yn=(await d("https://cdn.jsdmirror.com/npm/bigonion-kit@0.12.3/esm/kit.min.js")).default,oe=(await d("https://cdn.jsdmirror.com/npm/mermaid@10/dist/mermaid.esm.min.mjs")).default;async function Zn(e){async function t(c){let u=c.attrGet("src");if(u.startsWith("/vf/")){let f=u.match(/\d+/)[0];return await mn("uuid",parseInt(f)).then(k=>k[0].imgBase64)}}async function n(c){let u=c.content,f;try{return await oe.parse(u,{suppressErrors:!1}),await oe.parse(u,{suppressErrors:!0})&&(f=await oe.render(`_mermaidSvg_${Yn.getUUID().slice(0,5)}`,u)),f.svg}catch(k){return`<pre class="ERR">${k}</pre>`}}let i=[],r=[],a=[],o=[],s=[],l=ee();l.renderer.rules.image=function(c,u){return c[u].attrGet("src")?.startsWith("/vf/")&&i.push(c[u]),""},l.renderer.rules.fence=function(c,u,f,k,b){const x=c[u].info;return x==="mermaid"?(r.push(c[u]),""):((x==="py"||x==="python")&&a.push(c[u]),"")},l.render(e,{});for(const c of i){let u=await t(c);o.push(u)}for(const c of r){let u=await n(c);s.push(u)}return{vfImgSrcArr:o,vfImgSeq:0,mermaidParsedArr:s,mermaidSeq:0}}const Qn=window.IncrementalDOM,ei=(await d("https://cdn.jsdmirror.com/npm/@highlightjs/cdn-assets@11.6.0/es/highlight.min.js")).default;async function D(e=!1){let t=ne();t=wn(t);let n=await Zn(t);e?document.getElementById("view-area").innerHTML=ee().render(t,n):Qn.patch(document.getElementById("view-area"),ee().renderToIncrementalDOM(t,n)),ei.highlightAll()}const ti=window.React,ni=O(A)(({theme:e})=>({color:e.palette.mode==="light"?"rgb(55, 65, 81)":"#FFFFFF",marginLeft:10,fontFamily:["electronicFont"].join(","),backgroundColor:e.palette.mode==="light"?"#FFFFFF":"","&:hover":{backgroundColor:e.palette.mode==="light"?ht[300]:""}}));function se(e){return ti.createElement(ni,{id:"demo-customized-button",href:e.href?e.href:void 0,"aria-controls":e.open?"demo-customized-menu":void 0,"aria-haspopup":"true","aria-expanded":e.open?"true":void 0,disableElevation:!0,onClick:e.onClick,onMouseOver:e.onHover,endIcon:e.endIcon,startIcon:e.startIcon?e.startIcon:void 0,variant:"contained"},e.children)}const ii=(await d("https://cdn.jsdmirror.com/npm/bigonion-kit@0.12.3/esm/kit.min.js")).default;function be(){ii.sleep(400).then(()=>{window.print()})}const ri=""+new URL("../2904f250.aboutBox关闭.svg",import.meta.url).href;let Le;const $e=async()=>{let e=`
<div class="closeBox" id="closeAbout">
<img id="closeAboutSvg" class="closeSvg" src=${ri} alt="">
</div>
`;await fetch("https://cdn.jsdmirror.com/gh/LiWeny16/MarkdownOnline@main/src/assets/about.md").then(async n=>{Le=n.text(),document.getElementById("aboutMd")&&(document.getElementById("aboutMd").innerHTML=e+t(await Le))}).catch(n=>{console.error("Error fetching markdown:",n)});function t(n){return ee().render(n)}document.getElementById("closeAboutSvg").addEventListener("click",()=>{document.getElementById("aboutBox").style.display="none"}),document.getElementById("aboutBox").addEventListener("click",n=>{n.target==document.getElementById("markdownParser")&&(document.getElementById("aboutBox").style.display="none")}),document.getElementById("aboutBox").style.display="block"},Ae=[".md",".py",".js",".ts"];class et{fileHandle=null;constructor(t){t?this.fileHandle=t:this.fileHandle=window._fileHandle}async openSingleFile(){try{return[this.fileHandle]=await window.showOpenFilePicker({multiple:!1,types:[{description:"Text Files",accept:{"text/plain":Ae}}]}),window._fileHandle=this.fileHandle,this.fileHandle}catch(t){return console.error("Error opening file:",t),null}}async readFile(){return this.fileHandle?await(await this.fileHandle.getFile()).text():void 0}async saveFileSilently(t){if(!this.fileHandle)return;const n=await this.fileHandle.createWritable(),i=t;return await n.write(i),await n.close(),!0}async saveAsFile(t){try{const i=await(await window.showSaveFilePicker({suggestedName:"text",types:[{description:"Text Files",accept:{"text/plain":Ae}}]})).createWritable();await i.write(t??"Sth.."),await i.close(),console.log("File saved successfully as new file.")}catch(n){console.error("Save As operation cancelled or failed:",n)}}}function tt(e,t,n=""){const i=t??window.editor,r=e.editor.getEditors()[0].getModel().getFullModelRange();i.executeEdits("my-replace2",[{range:r,text:n,forceMoveMarkers:!0}])}const ai=window.React,oi=O(e=>ai.createElement(wt,{focusVisibleClassName:".Mui-focusVisible",disableRipple:!0,...e}))(({theme:e})=>({width:42,height:26,padding:0,"& .MuiSwitch-switchBase":{padding:0,margin:2,transitionDuration:"300ms","&.Mui-checked":{transform:"translateX(16px)",color:"#fff","& + .MuiSwitch-track":{backgroundColor:e.palette.mode==="dark"?"#2ECA45":"#65C466",opacity:1,border:0},"&.Mui-disabled + .MuiSwitch-track":{opacity:.5}},"&.Mui-focusVisible .MuiSwitch-thumb":{color:"#33cf4d",border:"6px solid #fff"},"&.Mui-disabled .MuiSwitch-thumb":{color:e.palette.mode==="light"?e.palette.grey[100]:e.palette.grey[600]},"&.Mui-disabled + .MuiSwitch-track":{opacity:e.palette.mode==="light"?.7:.3}},"& .MuiSwitch-thumb":{boxSizing:"border-box",width:22,height:22},"& .MuiSwitch-track":{borderRadius:26/2,backgroundColor:e.palette.mode==="light"?"#E9E9EA":"#39393D",opacity:1,transition:e.transitions.create(["background-color"],{duration:500})}})),si=(await d("https://cdn.jsdmirror.com/npm/@arco-design/web-react@2.62.0/+esm")).Message,C=(e,t,n)=>{const i=n?.zIndex??9999,r=n?.kind??"success";let a=document.getElementsByClassName("arco-message-wrapper arco-message-wrapper-top")[0];a?a.style.zIndex=String(i)??i:Ue.addStyle(`.arco-message-wrapper .arco-message-wrapper-top{z-index:${i}}`),si[r]({style:{position:"relative",zIndex:i},content:e,closable:!0,duration:t??2500,position:"top",...n?.extraConfig})},v=window.React,li=[{id:"1",label:"Documents",children:[{id:"1.1",label:"Company",children:[{id:"1.1.1",label:"Invoice",fileType:"pdf"},{id:"1.1.4",label:"Equipment",fileType:"pdf"},{id:"1.1.5",label:"Video conference",fileType:"video"}]}]},{id:"2",label:"Bookmarked",children:[{id:"2.1",label:"Learning materials",fileType:"folder"},{id:"2.2",label:"News",fileType:"folder"}]},{id:"3",label:"Bookmarked",children:[],fileType:"folder"}];function ci(){return v.createElement(R,{sx:{width:6,height:6,borderRadius:"70%",bgcolor:"warning.main",display:"inline-block",verticalAlign:"middle",zIndex:1,mx:1}})}const di=O(bt)(({theme:e})=>({color:e.palette.mode==="light"?e.palette.grey[800]:e.palette.grey[400],position:"relative",[`& .${ze.groupTransition}`]:{marginLeft:e.spacing(3.5)}})),mi=O(xt)(({theme:e})=>({flexDirection:"row-reverse",borderRadius:e.spacing(.7),marginBottom:e.spacing(.5),marginTop:e.spacing(.5),padding:e.spacing(.5),paddingRight:e.spacing(1),fontWeight:500,[`& .${ze.iconContainer}`]:{marginRight:e.spacing(2)},"&.Mui-expanded ":{"&:not(.Mui-focused, .Mui-selected, .Mui-selected.Mui-focused) .labelIcon":{color:e.palette.mode==="light"?e.palette.primary.main:e.palette.primary.dark},"&::before":{content:'""',display:"block",position:"absolute",left:"16px",top:"44px",height:"calc(100% - 48px)",width:"1.5px",backgroundColor:e.palette.mode==="light"?e.palette.grey[300]:e.palette.grey[700]}},"&:hover":{backgroundColor:yt(e.palette.primary.main,.1),color:e.palette.mode==="light"?e.palette.primary.main:"white"},"&.Mui-focused, &.Mui-selected, &.Mui-selected.Mui-focused":{backgroundColor:e.palette.mode==="light"?e.palette.primary.main:e.palette.primary.dark,color:e.palette.primary.contrastText}}));function ui(e){return v.createElement(It,{...e})}const gi=O(B)({color:"inherit",fontFamily:"General Sans",fontWeight:500});function pi({icon:e,expandable:t,children:n,...i}){return v.createElement(St,{...i,sx:{display:"flex",alignItems:"center"}},e&&v.createElement(R,{component:e,className:"labelIcon",color:"inherit",sx:{mr:1,fontSize:"1.2rem"}}),v.createElement(gi,{variant:"body2"},n),t&&v.createElement(ci,null))}const nt=e=>Array.isArray(e)?e.length>0&&e.some(nt):!!e,fi=e=>{switch(e){case"image":return Ve;case"pdf":return Rt;case"doc":return Ee;case"video":return Mt;case"folder":return He;case"pinned":return Tt;case"trash":return Oe;default:return Ee}},hi=v.forwardRef(function(t,n){const{id:i,itemId:r,label:a,disabled:o,children:s,...l}=t,{getRootProps:m,getContentProps:c,getIconContainerProps:u,getLabelProps:f,getGroupTransitionProps:k,status:b,publicAPI:x}=vt({id:i,itemId:r,children:s,label:a,disabled:o,rootRef:n}),H=x.getItem(r),V=nt(s);let N;return V?N=He:H.fileType&&(N=fi(H.fileType)),v.createElement(kt,{itemId:r},v.createElement(di,{...m(l)},v.createElement(mi,{...c({className:Vt("content",{"Mui-expanded":b.expanded,"Mui-selected":b.selected,"Mui-focused":b.focused,"Mui-disabled":b.disabled})})},v.createElement(Ct,{...u()},v.createElement(Et,{status:b})),v.createElement(pi,{...f({icon:N,expandable:V&&b.expanded})})),s&&v.createElement(ui,{...k()})))});function wi(e){return v.createElement(jt,{items:e.fileDirectoryArr??li,"aria-label":"file explorer",defaultExpandedItems:["1","1.1"],defaultSelectedItems:"1.1",sx:{height:"fit-content",flexGrow:1,maxWidth:400,overflowY:"auto"},slots:{item:hi}})}const y=window.React,le=new et,bi=_(function(){const[t,n]=y.useState([]),[i,r]=y.useState(""),a=We(),o=l=>()=>{we(l)},s=(l,m)=>{he({basic:{fileEditLocal:m}})};return y.createElement(y.Fragment,null,y.createElement(ye,{sx:{"& .MuiBackdrop-root":{backgroundColor:"transparent"}},anchor:"right",open:Qe(),onClose:o(!1)},y.createElement(R,{sx:{padding:"20px",width:"26svw",display:"flex",alignItems:"center",justifyContent:"center",height:"100svh",flexDirection:"column"}},y.createElement(R,{className:"FLEX COL"},y.createElement(wi,{fileDirectoryArr:t}),y.createElement(B,null,$().basic.fileEditLocal?i:""),y.createElement(A,{sx:{mb:"10px"},onClick:async()=>{try{const l=await le.openSingleFile();if(r(l?.name??""),l){C("正在打开本地文件，别急，你给我等会😅");const m=await le.readFile();m&&(tt(window.monaco,window.editor,m),C(`打开${l?.name}成功！😀`))}else C("左顾右盼，活在梦幻?",2500,{kind:"warning"})}catch{C("尼玛的报错乐🤣",2e3,{kind:"error"})}},variant:"contained",color:"primary"},"打开文件"),y.createElement(A,{sx:{mb:"10px"},variant:"contained",disabled:!0,color:"primary",onClick:async()=>{}},"打开文件夹"),y.createElement(A,{sx:{mb:"10px"},variant:"contained",onClick:()=>{le.saveAsFile(ne())}},"另存为"),y.createElement(R,{className:"FLEX COW ALI-CEN"},y.createElement(B,{sx:{mr:"10px",fontSize:"17px"},color:a.palette.info.contrastText},"同步本地编辑"),y.createElement(oi,{checked:$().basic.fileEditLocal,size:"small",inputProps:{"aria-label":"controlled"},onChange:s}))))))}),g=window.React,xi=(await d("https://cdn.jsdmirror.com/npm/bigonion-kit@0.12.3/esm/kit.min.js")).default,yi=window.React.Suspense,vi=g.lazy(()=>ve(()=>import("./Menu-be5f50e0.js"),["./Menu-be5f50e0.js","./@mui-ea53a646.js","./react-2b221fbb.js","./@babel-f8d566ba.js","./clsx-0839fdbe.js","./@emotion-d13e5fae.js","./hoist-non-react-statics-3f8ebaa8.js","./stylis-79144faa.js","./react-is-e5978b8b.js","./react-transition-group-bc100b23.js","./@popperjs-61ffd834.js","./prop-types-7395632d.js","./mobx-react-1c6baff6.js","./mobx-3741033e.js","./mobx-react-lite-1ad052b5.js","./use-sync-external-store-b84fba6b.js","./react-dom-d3bdc6a0.js","./bigonion-kit-f58b431d.js","./@monaco-editor-863e66c9.js","./state-local-dd516420.js","./react-resizable-8f73e4ed.js","./react-draggable-b033082a.js","..\\f65e29ed.react-resizable.css"],import.meta.url)),ki=(e,t)=>{xi.sleep(t).then(()=>{window.location.href=e})},Ci=()=>{ki("https://bigonion.cn",300)},Ei="0px 2px 4px -1px rgba(0,0,0,0.2), 0px 4px 5px 0px rgba(0,0,0,0.14), 0px 1px 10px 0px rgba(0,0,0,0.12);",Ii=240,Si=_(e=>{const t=We(),{window:n}=e,[i,r]=g.useState(!1),a=()=>{r(m=>!m)},o=n!==void 0?()=>n().document.body:void 0,s=()=>{C("此功能仍然在开发中",3e3,{kind:"info"})},l=g.createElement(R,{onClick:a,sx:{textAlign:"center",height:"100%",bgcolor:"black"}},g.createElement(B,{variant:"h2",sx:{fontSize:"20px",my:2,color:"wheat",textAlign:"center",boxShadow:Ei}},"Markdown+ Online View"),g.createElement(Ft,{sx:{height:"100%",bgcolor:"background.paper"}},g.createElement(W,null,g.createElement(G,{onClick:Ci},g.createElement(U,null,g.createElement(q,null,g.createElement(Dt,null))),g.createElement(J,{primary:"Home",secondary:""}))),g.createElement(W,null,g.createElement(G,{onClick:s},g.createElement(U,null,g.createElement(q,null,g.createElement(Ve,null))),g.createElement(J,{primary:"Photos",secondary:""}))),g.createElement(W,null,g.createElement(G,{onClick:be},g.createElement(U,null,g.createElement(q,null,g.createElement(Bt,null))),g.createElement(J,{primary:"Export",secondary:""}))),g.createElement(W,null,g.createElement(G,{onClick:()=>{$e()}},g.createElement(U,null,g.createElement(q,null,g.createElement(Kt,null))),g.createElement(J,{primary:"About",secondary:""})))));return g.createElement(g.Fragment,null,g.createElement("div",{className:"FLEX header-app-bar",style:{flex:"0 0 8.7vh"}},g.createElement(Ge,null),g.createElement(Lt,{component:"nav",sx:{position:"inherit",justifyContent:"center",zIndex:100,height:"8.7vh",transition:"background-color 250ms cubic-bezier(0.4, 0, 0.2, 1) 0ms,box-shadow 250ms cubic-bezier(0.4, 0, 0.2, 1) 0ms,border-color 250ms cubic-bezier(0.4, 0, 0.2, 1) 0ms,color 250ms cubic-bezier(0.4, 0, 0.2, 1) 0ms"}},g.createElement($t,null,g.createElement(ge,{color:"inherit",onClick:a,sx:{mr:200,display:{sm:"none"}}},g.createElement(At,null)),g.createElement(_t,{sx:{color:t.palette.mode=="light"?"black":"white",display:{xs:"none",md:"flex"},transition:"background-color 250ms cubic-bezier(0.4, 0, 0.2, 1) 0ms,box-shadow 250ms cubic-bezier(0.4, 0, 0.2, 1) 0ms,border-color 250ms cubic-bezier(0.4, 0, 0.2, 1) 0ms,color 250ms cubic-bezier(0.4, 0, 0.2, 1) 0ms",mr:1}}),g.createElement(B,{variant:"h1",component:"a",fontFamily:"monospace",href:"/",sx:{flexGrow:1,display:{xs:"none",sm:"block"},color:t.palette.mode==="light"?t.palette.primary.contrastText:t.palette.secondary.contrastText,fontFamily:"emoji",letterSpacing:".3rem",textDecoration:"none"}},g.createElement("h2",{style:{fontSize:"28px"}},"Markdown+ Online View")),g.createElement(R,{sx:{display:{xs:"none",sm:"flex",flexDirection:"row"}}},g.createElement(se,{href:"https://bigonion.cn",startIcon:g.createElement(Pt,null)},"首页"),g.createElement(se,{onClick:()=>{$e()},startIcon:g.createElement(Ke,null)},"关于"),g.createElement(yi,{fallback:g.createElement(se,{open,endIcon:g.createElement(Nt,null)},"更多")},g.createElement(vi,null)),g.createElement(hn,null),g.createElement(bi,null)))),g.createElement(R,{sx:{display:{xs:"flex",sm:"none"}},component:"nav"},g.createElement(ye,{container:o,variant:"temporary",open:i,onClose:a,ModalProps:{keepMounted:!0},sx:{display:{xs:"block",sm:"none"},"& .MuiDrawer-paper":{boxSizing:"border-box",width:Ii}}},l))))});async function ke(e=null,t=!0){let n=ne(),i="";if(t&&n!="null")try{cn(n),$().basic.fileEditLocal?await new et(window._fileHandle).saveFileSilently(n)?i="成功保存到本地！🎉":i="成功保存到浏览器！🎉(未打开本地文件)":i="成功保存到浏览器！🎉",C(i)}catch{C("你竟敢拒绝我。",2500,{kind:"error"})}else ke()}async function Ti(){return await Xe().then(e=>e?e[0]?.contentText===ne():!1)}function it(e,t){if($().basic.syncScroll)C("同步滚动已关闭 🧐 ",2e3),he({basic:{syncScroll:!1}});else{C("同步滚动已开启 😍 ",2e3);const n=e.getScrollTop();e.setScrollTop(n+.3),e.setScrollTop(n-.3);const i=e.getVisibleRanges();if(i.length>0){const a=i[0].startLineNumber,o=document.getElementById("view-area");a==1&&o.scrollTo({top:0,behavior:"smooth"})}he({basic:{syncScroll:!0}})}}function rt(e,t){Qe()?we(!1):we(!0)}function Mi(){document.addEventListener("keydown",e=>{e.ctrlKey&&e.key=="q"&&(e.stopPropagation(),e.preventDefault(),it(window.editor)),e.ctrlKey&&(e.altKey||e.shiftKey)&&e.key=="f"&&(e.stopPropagation(),e.preventDefault(),rt()),e.ctrlKey&&e.key=="s"&&(e.stopPropagation(),e.preventDefault(),ke()),e.ctrlKey&&e.key=="b"},!0)}function Ri(e,t){e.getContainerDomNode().addEventListener("paste",n=>{ji(n).then(i=>{if(i){let r="",a=new Date().getTime();for(let o=0;o<=i.length-1;o++)r+=`![我是图片](/vf/${a+o})`;dn(i,a),P(r,!0)}})},!0)}function ji(e){return new Promise(t=>{let i=e.clipboardData.items;const r=i.length;let a=[];for(let o=0;o<i.length;o++){let s=i[o];if(s.kind=="file"){e.preventDefault(),e.stopPropagation();let l=s.getAsFile(),m=new FileReader;m.onload=function(u){a.push(u.target.result),o===r-1&&t(a)};const c=l.type.split("/")[1];(c==="png"||c==="jpg"||c==="jpeg"||c==="webp"||c==="svg")&&m.readAsDataURL(l)}else t([])}})}let ce=!1,Y=0;function Li(e=2){let t,n;Y++,ce?(clearTimeout(t),t=setTimeout(function(){D(),Y=0},300)):(clearTimeout(n),Y>=e?(ce=!0,D(),n=setTimeout(()=>{ce=!1,Y=0},200)):D())}function de(){return document.getElementsByClassName("ibwrapper")[0]?document.getElementsByClassName("ibwrapper")[0].children[0].value:""}function $i(){console.log(de().split("#"));const e=de().split("#")[1],t=de().split("#")[2];P(Ai(e,t),!0)}function Ai(e,t){if(!e||!t)return"";let n="| ";for(let i=0;i<t;i++)n+=`Header  ${i+1} | `;n+=`
|`;for(let i=0;i<t;i++)n+="--- | ";for(let i=0;i<e;i++){n+=`
| `;for(let r=0;r<t;r++)n+=` Cell ${i+1}-${r+1} | `}return n}const _e=(await d("https://cdn.jsdmirror.com/npm/bigonion-kit@0.12.3/esm/kit.min.js")).default,_i=(await d("https://cdn.jsdmirror.com/npm/html2canvas@1.4.1/+esm")).default;function Pi(e=3,t="markdown.jpeg"){let n=document.getElementById("view-area").innerHTML;window.document.body.innerHTML=`<div id="exportBox" style="width:64vw" class="markdown-body markdown-body-${L()==="light"?"light":"dark"}">${n}</div>`,_e.sleep(250).then(()=>{_i(document.getElementById("exportBox"),{scale:e}).then(i=>{let r=i.toDataURL("image/png",.6);var a=document.createElement("a");a.download=t,a.href=r,a.click()}),_e.sleep(2e3).then(()=>{window.location.reload()})})}function Ni(){P(`|---|
`,!0)}function Fi(e,t){const n=e.getPosition();n.column==1&&(P(`$$

$$`,!0),e.setPosition({column:1,lineNumber:n.lineNumber+1}))}function Di(e,t){Ze()==="on"?Te("off"):Te("on")}let Bi=(e,t=!0,n)=>{const i=new webkitSpeechRecognition||new SpeechRecognition;let r=!1;return i.lang=e,i.continuous=!0,i.interimResults=!1,t&&i.start(),i.onstart=()=>{r=!0},i.onresult=a=>{let o=a.results[a.results.length-1][0].transcript;o=o.replace(/ /g,""),window._speechData.speechResult=o,n(o.length),r===!1&&i.stopRecognition()},i.onerror=function(a){a.error=="not-allowed"?C("语音权限被拒绝，世界，拒绝了我...",4500):console.log("语音识别错误:",a.error)},i.onend=()=>{console.log(r),r&&i.start()},i.stopRecognition=()=>{i.stop(),r=!1},{recognition:i,recognizing:r}};const La=[["zh-CN","普通话"],["en-US","English"],["ja-JP","日本語"],["fr-ch","法语（瑞士）"],["ko","韩语"]];function Ki(e,t){const n=$().basic.speechLanguage??"zh-CN";let i=r=>{P(window._speechData.speechResult,!0)};if(window._speechData.processing)C("语音识别已关闭，嗯你闭嘴吧，我不听...",2e3),window._speechData.processing=!1,window._speechData.speech.stopRecognition(),window._speechData.speech=null,window._speechData.speechResult="";else{C("语音识别已开启，嗯你说，我在听...",3e3),window._speechData.processing=!0;let{recognition:r}=Bi(n,!0,i);window._speechData.speech=r}}function Oi(e,t){const n=e.getSelection();let r=e.getModel().getValueInRange(n),a;r.startsWith("**")&&r.endsWith("**")?a=r.slice(2,-2):a=`**${r}**`;var s=new t.Range(n.startLineNumber,n.startColumn,n.endLineNumber,n.endColumn);if(e.executeEdits("my-source",[{range:s,text:a,forceMoveMarkers:!1}]),a!==r){const l=new t.Selection(n.startLineNumber,n.startColumn,n.endLineNumber,n.startColumn+a.length);e.setSelection(l)}}function zi(e,t){const n=e.getSelection(),i=e.getModel(),r=n.startLineNumber,a=i.getLineContent(r),o=a.length;let s="",l=o+1,m=o+1;const c=a.slice(-2);c===">>"?(s="",l=o-1):c==="||"?(s=">>",l=o-1):s=">>";const u=new t.Range(r,l,r,m);e.executeEdits("my-source",[{range:u,text:s,forceMoveMarkers:!0}]);const f=new t.Selection(r,l+s.length,r,l+s.length);e.setSelection(f)}function Hi(e,t){const n=e.getSelection(),i=e.getModel(),r=n.startLineNumber,a=i.getLineContent(r),o=a.length;let s="",l=o+1,m=o+1;const c=a.slice(-2);c==="||"?(s="",l=o-1):c===">>"?(s="||",l=o-1):s="||";const u=new t.Range(r,l,r,m);e.executeEdits("my-source",[{range:u,text:s,forceMoveMarkers:!0}]);const f=new t.Selection(r,l+s.length,r,l+s.length);e.setSelection(f)}function Vi(e,t){const n=e.getSelection();let r=e.getModel().getValueInRange(n),a;r.startsWith("*")&&r.endsWith("*")?a=r.slice(1,-1):a=`*${r}*`;var s=new t.Range(n.startLineNumber,n.startColumn,n.endLineNumber,n.endColumn);if(e.executeEdits("my-source",[{range:s,text:a,forceMoveMarkers:!1}]),a!==r){const l=new t.Selection(n.startLineNumber,n.startColumn,n.endLineNumber,n.startColumn+a.length);e.setSelection(l)}}function Wi(e,t){const n=e.getSelection();let r=e.getModel().getValueInRange(n),a;r.startsWith("<u>")&&r.endsWith("</u>")?a=r.slice(3,-4):a=`<u>${r}</u>`;var s=new t.Range(n.startLineNumber,n.startColumn,n.endLineNumber,n.endColumn);if(e.executeEdits("my-source",[{range:s,text:a,forceMoveMarkers:!1}]),a!==r){const l=new t.Selection(n.startLineNumber,n.startColumn,n.endLineNumber,n.startColumn+a.length);e.setSelection(l)}}function Gi(e,t){const n=e.getSelection();let r=e.getModel().getValueInRange(n),a;r.startsWith("~~")&&r.endsWith("~~")?a=r.slice(2,-2):a=`~~${r}~~`;var s=new t.Range(n.startLineNumber,n.startColumn,n.endLineNumber,n.endColumn);if(e.executeEdits("my-source",[{range:s,text:a,forceMoveMarkers:!1}]),a!==r){const l=new t.Selection(n.startLineNumber,n.startColumn,n.endLineNumber,n.startColumn+a.length);e.setSelection(l)}}function Z(e,t,n){const i=e.getSelection(),r=new t.Range(i.startLineNumber,1,i.startLineNumber,1),a=e.getModel().getLineContent(i.startLineNumber),o=/^(#+) /,s=a.match(o);if(!(["$"].includes(a[0])||a.match("```")))if(s&&s[1].length===n){console.log(a);const l=a.slice(s[0].length);e.executeEdits("",[{range:new t.Range(i.startLineNumber,1,i.startLineNumber,a.length+1),text:l}])}else{const l="#".repeat(n)+" ",m=s?new t.Range(i.startLineNumber,1,i.startLineNumber,s[0].length+1):r;e.executeEdits("",[{range:m,text:l}])}}const Ui=(await d("https://cdn.jsdmirror.com/npm/bigonion-kit@0.12.3/esm/kit.min.js")).default;function qi(e,t){const n={save:t.KeyMod.CtrlCmd|t.KeyCode.KeyS,quotation:t.KeyMod.Shift|t.KeyCode.Quote,format:t.KeyMod.Shift|t.KeyCode.KeyF,pageBreaker:t.KeyMod.CtrlCmd|t.KeyMod.Alt|t.KeyCode.Enter,latexBlock:t.KeyMod.CtrlCmd|t.KeyCode.KeyM,voice2Words:t.KeyMod.CtrlCmd|t.KeyMod.Alt|t.KeyCode.KeyV,syncScroll:t.KeyMod.CtrlCmd|t.KeyCode.KeyQ,fileManager:t.KeyMod.CtrlCmd|t.KeyMod.Shift|t.KeyCode.KeyF,markdownTextEditFastKey:{bold:t.KeyMod.CtrlCmd|t.KeyCode.KeyB,italics:t.KeyMod.CtrlCmd|t.KeyCode.KeyI,underline:t.KeyMod.CtrlCmd|t.KeyCode.KeyU,alignCenter:t.KeyMod.CtrlCmd|t.KeyCode.KeyE,alignRight:t.KeyMod.CtrlCmd|t.KeyCode.KeyR,deleteLine:t.KeyMod.CtrlCmd|t.KeyCode.Backquote,h1:t.KeyMod.CtrlCmd|t.KeyCode.Digit1,h2:t.KeyMod.CtrlCmd|t.KeyCode.Digit2,h3:t.KeyMod.CtrlCmd|t.KeyCode.Digit3,h4:t.KeyMod.CtrlCmd|t.KeyCode.Digit4}};e.addAction({id:"show.emojiPicker",label:"打开表情包超市 🤪",keybindings:[],contextMenuGroupId:"navigation",contextMenuOrder:-100,run:()=>{Di()}}),e.addAction({id:"insert.tableAny",label:"插入任意行和列,格式: table#x#x",keybindings:[],run:()=>{$i()}}),e.addAction({id:"reload-no-cache",label:"强制刷新Markdown在线",keybindings:[],run:()=>{window.location.reload(!0)}}),e.addAction({id:"export.asPDF",label:"保存并导出为PDF",keybindings:[],contextMenuGroupId:"navigation",contextMenuOrder:0,run:async()=>{await Ti()?be():(ke(),Ui.sleep(800).then(()=>{be()}))}}),e.addAction({id:"export.asImg",label:"作为PNG格式的图片导出",keybindings:[],run:()=>{Pi()}}),e.addAction({id:"insert.pageBreaker",label:"插入一个分页符",keybindings:[],contextMenuGroupId:"navigation",contextMenuOrder:0,run:()=>{Ni()}}),e.addAction({id:"insert.latexBlock",label:"插入一个LaTex语法块",keybindings:[n.latexBlock],contextMenuGroupId:"navigation",contextMenuOrder:0,run:()=>{Fi(e)}}),e.addAction({id:"insert.voice2words",label:"语音转文字...嘟...喂...听得见吗....",keybindings:[n.voice2Words],contextMenuGroupId:"navigation",contextMenuOrder:1,run:()=>{Ki()}}),e.addAction({id:"command.syncScroll",label:"同步滚动 (开启/关闭)",keybindings:[n.syncScroll],contextMenuGroupId:"navigation",run:()=>{it(e)}}),e.addAction({id:"command.fileManagerState",label:"文件管理器 (开启/关闭)",keybindings:[n.fileManager],contextMenuGroupId:"navigation",run:()=>{rt()}}),e.addAction({id:"insert.bold",label:"加粗文本",keybindings:[n.markdownTextEditFastKey.bold],contextMenuGroupId:"navigation",run:()=>{Oi(e,t)}}),e.addAction({id:"insert.alignRight",label:"文本居右",keybindings:[n.markdownTextEditFastKey.alignRight],contextMenuGroupId:"navigation",run:()=>{zi(e,t)}}),e.addAction({id:"insert.alignCenter",label:"文本居中",keybindings:[n.markdownTextEditFastKey.alignCenter],contextMenuGroupId:"navigation",run:()=>{Hi(e,t)}}),e.addAction({id:"insert.italics",label:"斜体",keybindings:[n.markdownTextEditFastKey.italics],run:()=>{Vi(e,t)}}),e.addAction({id:"insert.underline",label:"下划线",keybindings:[n.markdownTextEditFastKey.underline],run:()=>{Wi(e,t)}}),e.addAction({id:"insert.deleteLine",label:"删除线",keybindings:[n.markdownTextEditFastKey.deleteLine],run:()=>{Gi(e,t)}}),e.addAction({id:"insert.h1",label:"标题1",keybindings:[n.markdownTextEditFastKey.h1],run:()=>{Z(e,t,1)}}),e.addAction({id:"insert.h2",label:"标题2",keybindings:[n.markdownTextEditFastKey.h2],run:()=>{Z(e,t,2)}}),e.addAction({id:"insert.h3",label:"标题3",keybindings:[n.markdownTextEditFastKey.h3],run:()=>{Z(e,t,3)}}),e.addAction({id:"insert.h4",label:"标题4",keybindings:[n.markdownTextEditFastKey.h4],run:()=>{Z(e,t,4)}}),e.addAction({id:"reload",label:"重新加载窗口(Reload Window)",keybindings:[],contextMenuGroupId:"navigation",contextMenuOrder:100,run:()=>{window.location.reload()}})}const Ji=(await d("https://cdn.jsdelivr.net/npm/react-photo-view-cdn@0.0.4/esm/latex.map.min.js")).accents1,Xi=(await d("https://cdn.jsdelivr.net/npm/react-photo-view-cdn@0.0.4/esm/latex.map.min.js")).delimiters0,Yi=(await d("https://cdn.jsdelivr.net/npm/react-photo-view-cdn@0.0.4/esm/latex.map.min.js")).delimeterSizing0,Zi=(await d("https://cdn.jsdelivr.net/npm/react-photo-view-cdn@0.0.4/esm/latex.map.min.js")).greekLetters0,Qi=(await d("https://cdn.jsdelivr.net/npm/react-photo-view-cdn@0.0.4/esm/latex.map.min.js")).otherLetters0,er=(await d("https://cdn.jsdelivr.net/npm/react-photo-view-cdn@0.0.4/esm/latex.map.min.js")).annotation1,tr=(await d("https://cdn.jsdelivr.net/npm/react-photo-view-cdn@0.0.4/esm/latex.map.min.js")).verticalLayout0,nr=(await d("https://cdn.jsdelivr.net/npm/react-photo-view-cdn@0.0.4/esm/latex.map.min.js")).verticalLayout1,ir=(await d("https://cdn.jsdelivr.net/npm/react-photo-view-cdn@0.0.4/esm/latex.map.min.js")).verticalLayout2,rr=(await d("https://cdn.jsdelivr.net/npm/react-photo-view-cdn@0.0.4/esm/latex.map.min.js")).overlap1,ar=(await d("https://cdn.jsdelivr.net/npm/react-photo-view-cdn@0.0.4/esm/latex.map.min.js")).spacing0,or=(await d("https://cdn.jsdelivr.net/npm/react-photo-view-cdn@0.0.4/esm/latex.map.min.js")).spacing1,sr=(await d("https://cdn.jsdelivr.net/npm/react-photo-view-cdn@0.0.4/esm/latex.map.min.js")).logicAndSetTheory0,lr=(await d("https://cdn.jsdelivr.net/npm/react-photo-view-cdn@0.0.4/esm/latex.map.min.js")).logicAndSetTheory1,cr=(await d("https://cdn.jsdelivr.net/npm/react-photo-view-cdn@0.0.4/esm/latex.map.min.js")).macros0,dr=(await d("https://cdn.jsdelivr.net/npm/react-photo-view-cdn@0.0.4/esm/latex.map.min.js")).bigOperators0,mr=(await d("https://cdn.jsdelivr.net/npm/react-photo-view-cdn@0.0.4/esm/latex.map.min.js")).binaryOperators0,ur=(await d("https://cdn.jsdelivr.net/npm/react-photo-view-cdn@0.0.4/esm/latex.map.min.js")).fractions0,gr=(await d("https://cdn.jsdelivr.net/npm/react-photo-view-cdn@0.0.4/esm/latex.map.min.js")).fractions2,pr=(await d("https://cdn.jsdelivr.net/npm/react-photo-view-cdn@0.0.4/esm/latex.map.min.js")).binomialCoefficients0,fr=(await d("https://cdn.jsdelivr.net/npm/react-photo-view-cdn@0.0.4/esm/latex.map.min.js")).binomialCoefficients2,hr=(await d("https://cdn.jsdelivr.net/npm/react-photo-view-cdn@0.0.4/esm/latex.map.min.js")).mathOperators0,wr=(await d("https://cdn.jsdelivr.net/npm/react-photo-view-cdn@0.0.4/esm/latex.map.min.js")).mathOperators1,br=(await d("https://cdn.jsdelivr.net/npm/react-photo-view-cdn@0.0.4/esm/latex.map.min.js")).sqrt1,xr=(await d("https://cdn.jsdelivr.net/npm/react-photo-view-cdn@0.0.4/esm/latex.map.min.js")).relations0,yr=(await d("https://cdn.jsdelivr.net/npm/react-photo-view-cdn@0.0.4/esm/latex.map.min.js")).negatedRelations0,vr=(await d("https://cdn.jsdelivr.net/npm/react-photo-view-cdn@0.0.4/esm/latex.map.min.js")).arrows0,kr=(await d("https://cdn.jsdelivr.net/npm/react-photo-view-cdn@0.0.4/esm/latex.map.min.js")).extensibleArrows1,Cr=(await d("https://cdn.jsdelivr.net/npm/react-photo-view-cdn@0.0.4/esm/latex.map.min.js")).braketNotation1,Er=(await d("https://cdn.jsdelivr.net/npm/react-photo-view-cdn@0.0.4/esm/latex.map.min.js")).classAssignment1,Ir=(await d("https://cdn.jsdelivr.net/npm/react-photo-view-cdn@0.0.4/esm/latex.map.min.js")).color2,Sr=(await d("https://cdn.jsdelivr.net/npm/react-photo-view-cdn@0.0.4/esm/latex.map.min.js")).font0,Tr=(await d("https://cdn.jsdelivr.net/npm/react-photo-view-cdn@0.0.4/esm/latex.map.min.js")).font1,Mr=(await d("https://cdn.jsdelivr.net/npm/react-photo-view-cdn@0.0.4/esm/latex.map.min.js")).size0,Rr=(await d("https://cdn.jsdelivr.net/npm/react-photo-view-cdn@0.0.4/esm/latex.map.min.js")).style0,jr=(await d("https://cdn.jsdelivr.net/npm/react-photo-view-cdn@0.0.4/esm/latex.map.min.js")).symbolsAndPunctuation0,Lr=(await d("https://cdn.jsdelivr.net/npm/react-photo-view-cdn@0.0.4/esm/latex.map.min.js")).debugging0,$r=(await d("https://cdn.jsdelivr.net/npm/react-photo-view-cdn@0.0.4/esm/latex.map.min.js")).envs;function Ar(e,t){t.languages.registerCompletionItemProvider("markdown",{triggerCharacters:["/"],provideCompletionItems:(n,i,r)=>{const a=n.getValueInRange({startLineNumber:1,startColumn:1,endLineNumber:i.lineNumber,endColumn:i.column}),o={startLineNumber:i.lineNumber,startColumn:i.column-1,endLineNumber:i.lineNumber,endColumn:i.column};if(!at(a)&&i.column===2)return{suggestions:[{label:"/code (代码块)",detail:"插入一段代码块",kind:t.languages.CompletionItemKind.Function,insertText:"\n```${1:js}\n${2:}\n```\n",insertTextRules:t.languages.CompletionItemInsertTextRule.InsertAsSnippet,sortText:"0",range:o},{label:"/image (图片)",detail:"插入图片",kind:t.languages.CompletionItemKind.Function,insertText:"![${1:}](${2:})",insertTextRules:t.languages.CompletionItemInsertTextRule.InsertAsSnippet,sortText:"1",range:o},{label:"/table-2x2 (表格)",detail:"插入一个2行2列的表格",kind:t.languages.CompletionItemKind.Function,insertText:"\n|${1:}    |${1:}     |\n|--- |---  |\n|${1:}    |${1:}     |\n",insertTextRules:t.languages.CompletionItemInsertTextRule.InsertAsSnippet,sortText:"2",range:o},{label:"/table-2x4 (表格)",detail:"插入一个2行4列的表格",kind:t.languages.CompletionItemKind.Function,insertText:"\n|${1:}    |${1:}    |${1:}    |${1:}    |\n|--- |--- |--- |--- |\n|${1:}    |${1:}    |${1:}    |${1:}    |\n",insertTextRules:t.languages.CompletionItemInsertTextRule.InsertAsSnippet,sortText:"3",range:o},{label:"/latex-block (公式块)",detail:"创建一个LaTex公式块",kind:t.languages.CompletionItemKind.Field,sortText:"4",range:o,insertText:`$$
\${1:}
$$
`,insertTextRules:t.languages.CompletionItemInsertTextRule.InsertAsSnippet},{label:"/list-in-order (有序列表)",detail:"创建有序列表",kind:t.languages.CompletionItemKind.Function,sortText:"5",range:o,insertText:`
1. \${1:}
2. \${2:}
3. \${3:}
`,insertTextRules:t.languages.CompletionItemInsertTextRule.InsertAsSnippet},{label:"/page-breaker (分页符)",detail:"插入一个分页符",kind:t.languages.CompletionItemKind.Function,sortText:"6",range:o,insertText:`
|---|
`,insertTextRules:t.languages.CompletionItemInsertTextRule.InsertAsSnippet},{label:"/mermaid-flowChart (流程图)",detail:"插入mermaid流程图",kind:t.languages.CompletionItemKind.Function,sortText:"7",range:o,insertText:"\n```mermaid\nflowchart TB\nStart --> Stop\n```\n",insertTextRules:t.languages.CompletionItemInsertTextRule.InsertAsSnippet},{label:"/mermaid-pie-chart (饼图)",detail:"插入mermaid饼图",kind:t.languages.CompletionItemKind.Function,sortText:"8",range:o,insertText:'\n```mermaid\npie title ${1:Pets adopted by volunteers}\n    "Dogs" : 386\n    "Cats" : 85\n    "Rats" : 15\n```\n',insertTextRules:t.languages.CompletionItemInsertTextRule.InsertAsSnippet},{label:"/mermaid-mind-map (思维导图)",detail:"插入mermaid思维导图",kind:t.languages.CompletionItemKind.Function,sortText:"9",range:o,insertText:`
\`\`\`mermaid
mindmap
Root
    A
      B
      C
\`\`\`
`,insertTextRules:t.languages.CompletionItemInsertTextRule.InsertAsSnippet},{label:"/mermaid-time-line (时间线图)",detail:"插入mermaid时间线图",kind:t.languages.CompletionItemKind.Function,sortText:"a1",range:o,insertText:`
\`\`\`mermaid
timeline
    title History of Social Media Platform
    2002 : LinkedIn
    2004 : Facebook
         : Google
    2005 : Youtube
    2006 : Twitter
\`\`\`
`,insertTextRules:t.languages.CompletionItemInsertTextRule.InsertAsSnippet},{label:"/mermaid-sequence (序列图)",detail:"插入mermaid序列图",kind:t.languages.CompletionItemKind.Function,sortText:"a2",range:o,insertText:`
\`\`\`mermaid
sequenceDiagram
    Alice->>+John: Hello John, how are you?
    Alice->>+John: John, can you hear me?
    John-->>-Alice: Hi Alice, I can hear you!
    John-->>-Alice: I feel great!
\`\`\`
`,insertTextRules:t.languages.CompletionItemInsertTextRule.InsertAsSnippet},{label:"/prettier-ignore (忽略格式化行)",detail:"下一行不进行prettier格式化",kind:t.languages.CompletionItemKind.Function,insertText:"<!-- prettier-ignore -->",insertTextRules:t.languages.CompletionItemInsertTextRule.InsertAsSnippet,range:o,sortText:"b1"},{label:"/prettier-ignore-block (忽略格式化块)",detail:"忽略prettier格式化块",kind:t.languages.CompletionItemKind.Function,insertText:`<!-- prettier-ignore-start -->
\${1:}
<!-- prettier-ignore-end -->`,insertTextRules:t.languages.CompletionItemInsertTextRule.InsertAsSnippet,range:o,sortText:"b2"}]}}}),t.languages.registerCompletionItemProvider("markdown",{triggerCharacters:["\\"],provideCompletionItems:(n,i,r)=>{const a=n.getValueInRange({startLineNumber:1,startColumn:1,endLineNumber:i.lineNumber,endColumn:i.column});if(_r(t,n,a,i)){const o=Array.from([...Xi,...Yi,...Zi,...Qi,...ar,...tr,...sr,...cr,...dr,...mr,...pr,...ur,...hr,...xr,...yr,...vr,...Sr,...Mr,...Rr,...jr,...Lr],(c,u)=>({label:`\\${c}`,kind:t.languages.CompletionItemKind.Function,insertText:c,insertTextRules:t.languages.CompletionItemInsertTextRule.InsertAsSnippet,sortText:/[A-Z]/.test(c[0])?"1":"0"})),s=Array.from([...Ji,...er,...nr,...rr,...or,...lr,...wr,...br,...kr,...Tr,...Cr,...Er],(c,u)=>({label:`\\${c}`,kind:t.languages.CompletionItemKind.Function,insertText:`${c}{$1}`,insertTextRules:t.languages.CompletionItemInsertTextRule.InsertAsSnippet,sortText:/[A-Z]/.test(c[0])?"1":"0"})),l=Array.from([...ir,...fr,...gr,...Ir],(c,u)=>({label:`\\${c}`,kind:t.languages.CompletionItemKind.Function,insertText:`${c}{$1}{$2}`,insertTextRules:t.languages.CompletionItemInsertTextRule.InsertAsSnippet,sortText:/[A-Z]/.test(c[0])?"1":"0"})),m=[{label:"\\begin",kind:t.languages.CompletionItemKind.Function,insertText:"begin{${1|"+$r.join(",")+`|}}
	$2
\\end{$1}`,insertTextRules:t.languages.CompletionItemInsertTextRule.InsertAsSnippet}];return{suggestions:[...o,...s,...l,...m]}}}}),t.languages.registerCompletionItemProvider("markdown",{triggerCharacters:["^"],provideCompletionItems:(n,i,r)=>{const a=n.getValueInRange({startLineNumber:1,startColumn:1,endLineNumber:i.lineNumber,endColumn:i.column});if(Nr(a))return{suggestions:[{label:"RED",kind:t.languages.CompletionItemKind.Function,insertText:"RED",insertTextRules:t.languages.CompletionItemInsertTextRule.InsertAsSnippet,detail:"RED..."},{label:"PINK",kind:t.languages.CompletionItemKind.Function,insertText:"PINK",insertTextRules:t.languages.CompletionItemInsertTextRule.InsertAsSnippet,detail:"PINK..."}]}}}),t.languages.registerCompletionItemProvider("markdown",{provideCompletionItems:(n,i,r)=>{const a=n.getValueInRange({startLineNumber:1,startColumn:1,endLineNumber:i.lineNumber,endColumn:i.column});if(Fr(a))return{suggestions:[{label:"RED",kind:t.languages.CompletionItemKind.Function,insertText:"RED",insertTextRules:t.languages.CompletionItemInsertTextRule.InsertAsSnippet,detail:"RED..."}]}}})}function _r(e,t,n,i){return!!(n[n.length-1]==="\\"&&(at(n)||Pr(t,i)))}function at(e){return e.match(/\$\$/g)?e.match(/\$\$/g).length%2===1:!1}function Pr(e,t,n){const i=e.getLineContent(t.lineNumber),r=/\$(?!\s)((\\\$|[^\$\n])*?)(?<!\s)\$/g;if(i.match(r)){const a=i,s=window.editor.getPosition().column-1,l=[];let m;for(;(m=r.exec(a))!==null;){const u=m.index+1,f=r.lastIndex-1;l.push({startIndex:u,endIndex:f})}return l.some(u=>s>u.startIndex&&s<=u.endIndex)}else return!1}function Nr(e){return e[e.length-1]==="^"}function Fr(e){return e.match(/\`\`\`js/g)?(window.monaco.editor.setModelLanguage(window.editor.getModel(),"javascript"),!0):(window.monaco.editor.setModelLanguage(window.editor.getModel(),"markdown"),!1)}const Dr=(await d("https://cdn.jsdmirror.com/npm/prettier@3.2.4/+esm")).default,Br=(await d("https://cdn.jsdmirror.com/npm/prettier@3.2.4/plugins/markdown.js/+esm")).default;function Kr(e,t){t.languages.registerDocumentFormattingEditProvider("markdown",{provideDocumentFormattingEdits(n){let i=n.getValue();var r=e.getPosition();return Dr.format(i,{parser:"markdown",plugins:[Br]}).then(a=>{tt(window.monaco,e,a),e.setPosition(r)}),[]}})}function Or(){const e=document.documentElement.clientWidth,t=document.documentElement.clientHeight;return e/t>=1?"PC":"mobile"}function zr(e,t){e.onContextMenu(n=>{Sn({posx:n.event.posx,posy:n.event.posy})})}function Hr(e,t){e.onDidFocusEditorWidget(()=>{window._deco.clear()})}function Vr(e){const t=()=>{e(Math.floor(window.innerHeight*.9))};window.addEventListener("resize",t)}function Wr(e,t){const n=Ot(()=>{Gr(e)},20);e.onDidScrollChange(n)}function Gr(e,t){if($().basic.syncScroll){const n=e.getVisibleRanges();if(n.length>0){const r=n[0].startLineNumber;Ur(r-1)}}}function Ur(e){const t=document.getElementById("view-area");if(!t)return;if(e===0){t.scrollTo({top:0,behavior:"smooth"});return}const n=document.querySelectorAll("#view-area [data-line]");let i=null,r=null,a=1/0,o=1/0,s=null;if(n.forEach(l=>{const c=parseInt(l.getAttribute("data-line")||"0",10)-e;c==0?s=l:(c<0&&Math.abs(c)<a&&(a=Math.abs(c),i=l),c>0&&c<o&&(o=c,r=l))}),s){t.scrollTo({top:s.offsetTop,behavior:"smooth"});return}if(!r){t.scrollTo({top:i.offsetTop,behavior:"smooth"});return}if(i&&r){const l=i.offsetTop,m=r.offsetTop,c=(e-(e-a))/(o+a),u=(m-l)*c+l;t.scrollTo({top:u,behavior:"smooth"})}}const S=window.React,Pe=window.React.useState,Ne="0.45.0",Fe={unpkg:["npm.onmicrosoft.cn","unpkg.com","npm.elemecdn.com"],jsDelivr:["jsd.onmicrosoft.cn","www.jsdelivr.com","cdn.jsdmirror.com"]},De={unpkg:{cdn:`https://${Fe.unpkg[0]}/monaco-editor@${Ne}/dev/vs`},jsDelivr:{cdn:`https://${Fe.jsDelivr[2]}/npm/monaco-editor@${Ne}/dev/vs`}};try{Ie.config({paths:{vs:De.jsDelivr.cdn}})}catch{Ie.config({paths:{vs:De.jsDelivr.cdn}})}const qr={"index.py":{name:"index.py",language:"python",value:""},"index.js":{name:"index.js",language:"javascript",value:"nihao"},"index.md":{name:"index.md",language:"markdown",value:""}},Jr=_(function(){const t=S.useRef(null),[n,i]=S.useState(!0),r=()=>{i(!1)},[a,o]=S.useState(640),[s,l]=S.useState(800),m=()=>{D(!0),setTimeout(()=>{u(h=>({...h,minimap:{enabled:!0}}))},300)},[c,u]=Pe({fontSize:16,wordWrap:"on",formatOnType:!0,formatOnPaste:!1,fontLigatures:!0,autoSurround:"quotes",autoClosingQuotes:"always",smoothScrolling:!0,codeLens:!1,pasteAs:{enabled:!1,showPasteSelector:"never"},peekWidgetDefaultFocus:"tree",cursorSmoothCaretAnimation:"explicit",colorDecorators:!0,minimap:{enabled:!0},unicodeHighlight:{nonBasicASCII:!1,ambiguousCharacters:!1}}),[f,k]=Pe("index.md"),b=qr[f];function x(h){Li(4)}function H(h,I){Or()=="PC"&&o(document.getElementById("editor").clientWidth/2),l(document.getElementById("editor").clientHeight),I.languages.setLanguageConfiguration("markdown",{autoClosingPairs:[{open:"{",close:"}"},{open:"[",close:"]"},{open:"(",close:")"},{open:'"',close:'"'},{open:"'",close:"'",notIn:["string","comment"]},{open:"`",close:"`",notIn:["string","comment"]},{open:"/*",close:"*/",notIn:["string"]},{open:"？",close:"？",notIn:["string","comment"]}]}),I.languages.setMonarchTokensProvider("markdown",{tokenizer:{root:[[/\b(function|return|var)\b/,"keyword"],[/\|\|/,"string"],[/>>/,"string"],[/[{}]/,"delimiter"],[/[a-z_$][\w$]*/,"identifier"],[/"[^"]*"/,"string"],[/\d+/,"number"],[/[$$$$]/,"keyword"]]}})}function V(){}function N(h,I){window.editor=h,window.monaco=I,Un(h,I,r),H(h,I),Ri(h),qi(h,I),Ar(h,I),Kr(h,I),zr(h),Hr(h),Wr(h),Vr(l)}return S.createElement(S.Fragment,null,S.createElement("div",{ref:t,id:"monaco-editor",style:{width:a,height:"100%"}},S.createElement(Gt,{className:"custom-resizable",width:a,height:s,draggableOpts:{grid:[5,15]},minConstraints:[100,s],onResizeStop:m,onResize:h=>{u(I=>({...I,minimap:{enabled:!1}})),o(h.x)},axis:"x"},S.createElement(Wt,{className:"monaco-editor-inner",height:"100%",width:a,theme:L()==="light"?"vs-light":"vs-dark",path:b.name,defaultLanguage:b.language,defaultValue:b.value,onMount:N,onChange:x,options:c,beforeMount:V})),S.createElement(zt,{sx:{color:"#fff",zIndex:h=>h.zIndex.drawer+1},open:n,onClick:r},S.createElement(Ht,{color:"inherit"}))))}),me=window.React;function Xr(){return me.createElement(me.Fragment,null,me.createElement(Jr,null))}const w=window.React,Yr=window.React.Suspense,Zr=w.lazy(()=>ve(()=>import("./EmojiPicker-02c6c3be.js"),["./EmojiPicker-02c6c3be.js","./@emoji-mart-3805b488.js","./emoji-mart-029374f1.js","./mobx-react-1c6baff6.js","./mobx-3741033e.js","./mobx-react-lite-1ad052b5.js","./use-sync-external-store-b84fba6b.js","./@mui-ea53a646.js","./react-2b221fbb.js","./@babel-f8d566ba.js","./clsx-0839fdbe.js","./@emotion-d13e5fae.js","./hoist-non-react-statics-3f8ebaa8.js","./stylis-79144faa.js","./react-is-e5978b8b.js","./react-transition-group-bc100b23.js","./@popperjs-61ffd834.js","./prop-types-7395632d.js","./react-dom-d3bdc6a0.js","./bigonion-kit-f58b431d.js","./@monaco-editor-863e66c9.js","./state-local-dd516420.js","./react-resizable-8f73e4ed.js","./react-draggable-b033082a.js","..\\f65e29ed.react-resizable.css"],import.meta.url));function Qr(e){e&&Mi()}const ea=_(function(){w.useState("");const t=w.useRef(null);return w.useEffect(()=>{Qr(!0)},[]),w.createElement(w.Fragment,null,w.createElement("div",{style:{marginTop:"1.3vh"},id:"bodyTopBox"},w.createElement("div",{id:"editor",className:`${L()=="light"?"theme-light":"theme-dark"} FLEX ROW`},w.createElement(Xr,null),w.createElement("article",{id:"view-area-hidden",className:"hidden-pre"}),w.createElement("article",{ref:t,id:"view-area",className:`markdown-body ${L()==="light"?"markdown-body-light":"markdown-body-dark"}`})),w.createElement("div",{id:"aboutBox"},w.createElement("div",{id:"markdownParser"},w.createElement("div",{id:"aboutMd",className:`aboutViewArea markdown-body ${L()==="light"?"markdown-body-light":"markdown-body-dark"}`}))),w.createElement(Yr,{fallback:w.createElement(w.Fragment,null)},w.createElement(Zr,{open:Ze()==="on"}))))}),j=window.React,ot={zIndex:{drawer:1300,modal:1200,appBar:1200}},ta=xe({...ot,palette:{primary:{main:pe[200],contrastText:"#fff378"},secondary:{main:fe[500],contrastText:"pink"},info:{main:pe[200],contrastText:"#8B8A8A"},mode:"light"}}),na=xe({...ot,palette:{primary:{main:pe[400],contrastText:"wheat"},secondary:{main:fe[700],contrastText:"wheat"},info:{main:fe[600],contrastText:"#8B8A8A"},mode:"dark"}}),ia=_(()=>(j.useEffect(()=>{Ue.addStyle(`
    ::selection {
      border-radius: 5px;
      background-color: ${L()==="light"?"#add6ff":"#636363"};
    }
    `)},[]),j.createElement(j.Fragment,null,j.createElement(Be,{theme:L()==="light"?ta:na},j.createElement(Ge,null),j.createElement(R,{className:"FLEX COL App-top"},j.createElement(Si,null),j.createElement(ea,null)))))),ra=window.React;st.createRoot(document.getElementById("root")).render(ra.createElement(ia,null));export{se as C,oi as I,ne as a,L as b,$ as c,Ra as d,Pi as e,ja as f,Sa as g,Ta as h,d as i,he as j,D as k,ke as l,be as m,re as n,Ti as o,we as p,Ma as q,Te as r,La as s,P as t,sn as u};
