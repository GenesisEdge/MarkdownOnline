var $=Object.defineProperty;var k=(e,t,n)=>t in e?$(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n;var w=(e,t,n)=>(k(e,typeof t!="symbol"?t+"":t,n),n);import{c as client}from"./react-dom-d3bdc6a0.js";import{T as Tooltip,Z as Zoom,c as createTheme,p as purple,D as Dialog,a as DialogTitle,b as DialogContent,d as DialogContentText,e as DialogActions,B as Button,f as Drawer,g as ThemeProvider,I as IconButton,h as default_1,i as default_1$1,j as Divider,G as Grid,s as styled,k as grey,S as Switch,l as TreeItem2Root,t as treeItemClasses,m as TreeItem2Content,n as alpha,o as Typography,u as useTreeItem2,q as TreeItem2Provider,r as TreeItem2IconContainer,v as TreeItem2Icon,C as Collapse,w as TreeItem2Label,x as Box$1,y as default_1$2,z as default_1$3,A as default_1$4,E as default_1$5,F as default_1$6,H as default_1$7,R as RichTreeView,J as useTheme,K as CssBaseline,L as AppBar,M as Toolbar,N as default_1$8,O as default_1$9,P as default_1$a,Q as default_1$b,U as List,V as ListItem,W as ListItemButton,X as ListItemAvatar,Y as Avatar,_ as default_1$c,$ as ListItemText,a0 as default_1$d,a1 as default_1$e,a2 as debounce,a3 as Backdrop,a4 as CircularProgress,a5 as blue,a6 as green}from"./@mui-2be9fea0.js";import{PhotoProvider,PhotoView}from"https://cdn.jsdmirror.com/gh/LiWeny16/MarkdownOnline@V2.1.3/@cdn/lib/react-photo-view/react-photo-view.module.js";import{makeAutoObservable,observable,toJS}from"https://cdn.jsdmirror.com/npm/mobx@6.12.0/+esm";import{o as observer}from"./mobx-react-1a77d2ab.js";import{openDB,updateDB,cursorGetData,cursorGetDataByIndex}from"https://cdn.jsdmirror.com/gh/LiWeny16/MarkdownOnline@V2.1.1/@cdn/functions/App/db.min.js";import hljs from"https://npm.elemecdn.com/@highlightjs/cdn-assets@11.6.0/es/highlight.min.js";import"https://npm.elemecdn.com/katex@0.16.7/dist/katex.min.js";import{marked}from"https://npm.elemecdn.com/marked/lib/marked.esm.js";import mermaid from"https://cdn.jsdmirror.com/npm/mermaid@10/dist/mermaid.esm.min.mjs";import kit from"https://cdn.jsdmirror.com/npm/bigonion-kit@0.12.3/esm/kit.min.js";import markdownIt from"https://cdn.jsdmirror.com/npm/markdown-it@8.4.2/+esm";import mdItMultimdTable from"https://cdn.jsdmirror.com/npm/markdown-it-multimd-table@4.2.3/+esm";import markdownItGithubToc from"https://cdn.jsdmirror.com/npm/markdown-it-github-toc@3.2.4/src/index.js/+esm";import markdownItTaskLists from"https://cdn.jsdmirror.com/npm/@hackmd/markdown-it-task-lists@2.1.4/+esm";import{full}from"https://cdn.jsdmirror.com/npm/markdown-it-emoji@3.0.0/+esm";import{has,emojify}from"https://cdn.jsdmirror.com/npm/node-emoji@2.1.3/+esm";import vconsole from"https://cdn.jsdmirror.com/npm/vconsole@3.15.1/+esm";import markdownitFootNote from"https://cdn.jsdmirror.com/npm/markdown-it-footnote@4.0.0/+esm";import{Notification,Message}from"https://cdn.jsdmirror.com/npm/@arco-design/web-react@2.62.0/+esm";import{c as clsx}from"./clsx-0839fdbe.js";import{l as loader,F as Ft}from"./@monaco-editor-38e7c7a5.js";import html2canvas from"https://cdn.jsdmirror.com/npm/html2canvas@1.4.1/+esm";import{R as ResizableBox}from"./react-resizable-8f73e4ed.js";import{delimiters0,delimeterSizing0,greekLetters0,otherLetters0,spacing0,verticalLayout0,logicAndSetTheory0,macros0,bigOperators0,binaryOperators0,binomialCoefficients0,fractions0,mathOperators0,relations0,negatedRelations0,arrows0,font0,size0,style0,symbolsAndPunctuation0,debugging0,accents1,annotation1,verticalLayout1,overlap1,spacing1,logicAndSetTheory1,mathOperators1,sqrt1,extensibleArrows1,font1,braketNotation1,classAssignment1,verticalLayout2,binomialCoefficients2,fractions2,color2,envs}from"https://cdn.jsdmirror.com/gh/LiWeny16/MarkdownOnline@main/@cdn/functions/Monaco/snippets/latexRules.min.js";import prettier from"https://cdn.jsdmirror.com/npm/prettier@3.2.4/+esm";import parseMd from"https://cdn.jsdmirror.com/npm/prettier@3.2.4/plugins/markdown.js/+esm";import"./react-2b221fbb.js";import"./@babel-f8d566ba.js";import"./@emotion-d13e5fae.js";import"./hoist-non-react-statics-3f8ebaa8.js";import"./stylis-79144faa.js";import"./react-is-e5978b8b.js";import"./react-transition-group-bc100b23.js";import"./@popperjs-f3391c26.js";import"./prop-types-7395632d.js";import"./mobx-react-lite-15e39ab3.js";import"./use-sync-external-store-b84fba6b.js";import"./state-local-dd516420.js";import"./react-draggable-b033082a.js";(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))r(a);new MutationObserver(a=>{for(const i of a)if(i.type==="childList")for(const o of i.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function n(a){const i={};return a.integrity&&(i.integrity=a.integrity),a.referrerPolicy&&(i.referrerPolicy=a.referrerPolicy),a.crossOrigin==="use-credentials"?i.credentials="include":a.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function r(a){if(a.ep)return;a.ep=!0;const i=n(a);fetch(a.href,i)}})();const scriptRel="modulepreload",assetsURL=function(e,t){return new URL(e,t).href},seen={},__vitePreload=function(t,n,r){if(!n||n.length===0)return t();const a=document.getElementsByTagName("link");return Promise.all(n.map(i=>{if(i=assetsURL(i,r),i in seen)return;seen[i]=!0;const o=i.endsWith(".css"),l=o?'[rel="stylesheet"]':"";if(!!r)for(let c=a.length-1;c>=0;c--){const u=a[c];if(u.href===i&&(!o||u.rel==="stylesheet"))return}else if(document.querySelector(`link[href="${i}"]${l}`))return;const d=document.createElement("link");if(d.rel=o?"stylesheet":scriptRel,o||(d.as="script",d.crossOrigin=""),d.href=i,document.head.appendChild(d),o)return new Promise((c,u)=>{d.addEventListener("load",c),d.addEventListener("error",()=>u(new Error(`Unable to preload CSS for ${i}`)))})})).then(()=>t()).catch(i=>{const o=new Event("vite:preloadError",{cancelable:!0});if(o.payload=i,window.dispatchEvent(o),!o.defaultPrevented)throw i})};function insertTextMonacoAtCursor(e,t,n=window.editor,r=window.monaco){const a=window.editor,i=e,o=window.editor.getSelections()[0];a.executeEdits("img-insert",[{range:new window.monaco.Range(o.startLineNumber,o.startColumn,o.endLineNumber,o.endColumn),text:i,forceMoveMarkers:t}])}function writeClipboard(e){navigator.clipboard.writeText(e).catch(t=>{console.error("Failed to copy text: ",t)})}const React$d=window.React,_MagicImg=React$d.forwardRef(MagicImg);function MagicImg(e,t){let n="FLEX JUS-CENTER ",r={width:"fitContent"};const[a,i]=React$d.useState(!1);function o(d){d.altKey&&writeClipboard(`![我是图片](/vf/${e.uuid})`),d.ctrlKey&&insertTextMonacoAtCursor(`![我是图片](/vf/${e.uuid})`,!0)}let[l,s]=React$d.useState({src:e.src,uuid:e.uuid,magic:e.magic!=0,className:n+(e.className??""),style:e.style?{...e.style,...r}:r});return React$d.createElement(React$d.Fragment,null,React$d.createElement("div",{...l,...e,ref:t,className:l.className,style:l.style},React$d.createElement(PhotoProvider,null,React$d.createElement(PhotoView,{triggers:["onDoubleClick"],src:l.src},React$d.createElement(Tooltip,{placement:"right",TransitionComponent:Zoom,arrow:!0,title:"按住Ctrl点击插入"},React$d.createElement("img",{onMouseEnter:()=>{i(!0)},onMouseLeave:()=>{i(!1)},onClick:d=>{o(d)},style:{width:"70%",transition:" 0.2s ease-in-out",borderRadius:"5px",transform:a?"translate(0px, -2px)":"",boxShadow:a?"1vh 2vh 21px rgb(79 79 79)":"rgb(216 216 216) 1vh 2vh 21px"},src:l.src,alt:"error"}))))))}class ImageStore{constructor(t){w(this,"displayState",!1);makeAutoObservable(this,{displayState:observable}),this.displayState=t}display(){this.displayState=!0}hidden(){this.displayState=!1}}const imageStore=new ImageStore(!1),useImage=()=>imageStore;function fillInMemoryText(e){openDB("md_content",2).then(t=>{updateDB(t,"users_md",{uuid:1,contentText:e})})}async function readMemoryText(){return new Promise(e=>{openDB("md_content",2).then(t=>{cursorGetData(t,"users_md").then(n=>{e(n)})})})}function fillInMemoryImgs(e,t){openDB("md_content",2).then(n=>{for(let r=0;r<=e.length-1;r++){let a={uuid:t+r,imgBase64:e[r]};updateDB(n,"users_img",a)}})}async function readMemoryImg(e,t){return new Promise(n=>{openDB("md_content",2).then(r=>{cursorGetDataByIndex(r,"users_img",e,t).then(a=>{n(a)})})})}async function readAllMemoryImg(){return new Promise(e=>{openDB("md_content",2).then(t=>{cursorGetData(t,"users_img").then(n=>{e(n)})})})}const React$c=window.React;function LR(e){const t=React$c.Children.toArray(e.children).length;let n="LR ",r={display:"flex",flexDirection:"row",justifyContent:e.jus??"center",alignItems:e.ali??"center",width:"100%",height:"100%"},[a,i]=React$c.useState({style:e.style?{...e.style,...r}:r,className:n+(e.className??""),space:e.space??void 0,order:[]}),[o,l]=React$c.useState({marginRight:"5px",width:"100%",height:"100%"});return React$c.createElement(React$c.Fragment,null,React$c.createElement("div",{...a,...e,className:a.className,style:a.style},React$c.Children.map(e.children,(s,d)=>d==t-1?React$c.createElement("div",{style:{...o,flex:a.space?"auto":void 0}},s):React$c.createElement("div",{style:{...o,order:`${a.order[d]}`,flex:`0 0 ${a.space?a.space[d]:void 0}%`}},s))))}const React$b=window.React;function Box(e){var i,o;let t="Box ",n={display:"flex",flexDirection:e.dir??"row",justifyContent:e.jus??"center",alignItems:e.ali??"center",width:e.min==1?"fitContent":"100%",height:e.min==1?"fitContent":"100%",transform:e.move?`translate(${((i=e.move)==null?void 0:i.x)??0}, ${((o=e.move)==null?void 0:o.y)??0})`:void 0},[r,a]=React$b.useState({style:e.style?{...e.style,...n}:n,className:t+(e.className??""),space:e.space??void 0,order:[]});return React$b.createElement(React$b.Fragment,null,React$b.createElement("div",{...r,...e,className:r.className,style:r.style},e.children))}function deleteDBAll(e){let t=window.indexedDB.deleteDatabase(e);t.onerror=function(n){console.log("删除失败")},t.onsuccess=function(n){console.log("删除成功")}}const React$a=window.React,theme=createTheme({palette:{primary:{main:"#1976d2"},secondary:purple}}),TemporaryDrawer=observer(e=>{const t=useImage(),[n,r]=React$a.useState(!1),[a,i]=React$a.useState([]),[o,l]=React$a.useState(!1);function s(){l(!0)}return React$a.useEffect(()=>{readAllMemoryImg().then(d=>{i(d)})}),React$a.useEffect(()=>{r(t.displayState)},[t.displayState]),React$a.createElement(React$a.Fragment,null,React$a.createElement(Dialog,{open:o,onClose:()=>{l(!1)}},React$a.createElement(DialogTitle,{id:"alert-dialog-title"},"Ready to delete all the images?"),React$a.createElement(DialogContent,null,React$a.createElement(DialogContentText,{id:"alert-dialog-description"},'Once you have clicked the "yes" button, your pictures and your text will be deleted!')),React$a.createElement(DialogActions,null,React$a.createElement(Button,{onClick:()=>{l(!1),deleteDBAll("md_content"),window.location.reload()}},"YES"),React$a.createElement(Button,{onClick:()=>{l(!1)},autoFocus:!0},"NO"))),React$a.createElement(Drawer,{anchor:"bottom",open:n,elevation:16,onClose:()=>{t.hidden()}},React$a.createElement("div",{style:{height:"60svh"}},React$a.createElement("div",null,React$a.createElement(ThemeProvider,{theme},React$a.createElement(Box,null,React$a.createElement(LR,{space:[90]},React$a.createElement(Box,{min:1,move:{x:"5svw"}},React$a.createElement("p",null,"图片管理器"),React$a.createElement(Tooltip,{title:React$a.createElement("div",null,"管理粘贴上传的图片",React$a.createElement("ul",{style:{margin:"2px"}},React$a.createElement("li",null,"按住Ctrl点击图片插入"),React$a.createElement("li",null,"双击图片放大预览"),React$a.createElement("li",null,"按住Alt点击图片复制图片")))},React$a.createElement(IconButton,null,React$a.createElement(default_1,{color:"primary"})))),React$a.createElement(Box,null,React$a.createElement(Tooltip,{title:"删除全部图片和储存的文字"},React$a.createElement(IconButton,{onClick:s},React$a.createElement(default_1$1,{color:"primary"})))))))),React$a.createElement(Divider,{style:{marginBottom:"1.3svh"}}),React$a.createElement(Grid,{container:!0,rowSpacing:5,columns:16},a?a.map((d,c)=>React$a.createElement(Grid,{id:d.uuid,key:d.uuid,xs:8},React$a.createElement(_MagicImg,{magic:0,src:d.imgBase64,uuid:d.uuid}))):void 0))))});function getMdTextFromMonaco(){var e;return(e=window.editor)!=null&&e.getValue?window.editor.getValue():"null"}function getRenderHTML(e="view-area"){let t=document.getElementById(e);if(t)return t.innerHTML}function PageBreaker(e){let t=/\|---\|/g;return e=e.replace(t,()=>'<div style="page-break-after: always;"></div>'),e}const index="",welcomeText=`[TOC]\r
\r
## 新一代的“Markdown”编辑器\r
\r
## 一、小贴士😀\r
\r
1. 如果你还不清楚什么是markdown的话请移步[markdown简介](https://markdown.com.cn/cheat-sheet.html#总览), 下面是一些简短的介绍：\r
   - 左边是源代码\r
   - 右边是渲染出来的结果\r
   - 试着在新的一行打出一个# 你好, 在右边就会发现变成标题了！\r
2. 在新的一行打一个斜杠字符：\`/\`，即可看到流程图、代码块等快捷提示！\r
3. 鼠标右键也可发现新大陆( •̀ ω •́ )✧\r
4. 导出为PDF在右上角更多里，直接按下\`Ctrl + P\`也可以哦\r
5. 快捷键完备，试着按下他们吧！\r
   - \`Ctrl + V\` 上传复制和截图的JPG、PNG格式图片\r
   - \`Ctrl + Z\` 撤回编辑\r
   - \`Ctrl + F\` 查找与替换\r
   - \`Ctrl + E/R\` 文本居中/右\r
   - \`Ctrl + B\` 文本加粗\r
   - \`Ctrl + U\` 下划线\r
   - \`Ctrl + I\` 文本斜体\r
   - \`Ctrl + 1-4\` 1-4级标题\r
   - \`\` Ctrl + \` \`\` 删除线\r
   - \`Ctrl + Q\` 同步滚动\r
   - \`Ctrl + Shift + F\` 文件管理器\r
   - \`Ctrl + S\` 保存\r
   - \`Ctrl + M\` 插入一个LaTex代码块\r
   - \`Shift + Alt + F\` 格式化Markdown\r
   - \`Ctrl + Alt + V\` 语音转文字\r
   - 更多快捷键，敬请期待...\r
\r
## 二、下面是一些常用的Makrdown语法\r
\r
你好，我是表情包😅\r
\r
我是脚注 [^1] 就是引经据典的那种脚注 [^2]，就是点一下就会跳转到最下面解释的那种！！！\r
\r
你好，我是带语法提示的LaTex！试着在两个\`$$ $$\`中间打一个斜杠吧，如果你不清楚LaTex公式的语法，请移步[LaTex公示表](https://blog.csdn.net/Yushan_Ji/article/details/134322574)\r
\r
$$\r
\\lambda+1=\\lambda^3-1\r
$$\r
\r
[我是链接](https://bigonion.cn)\r
\r
## 三、一些扩展的东西✨\r
\r
对，就在下面，打一个斜杠/，再打flow，回车！\r
\r
\`\`\`mermaid\r
flowchart TB\r
Start --> Stop\r
\`\`\`\r
\r
## 四、关于我和这个项目\r
\r
https://github.com/LiWeny16/MarkdownOnline\r
\r
[^1]: 就是解释一些东西的脚注啦！\r
[^2]: 这是第二个脚注！\r
`;function blankTextInit(){return new Promise(e=>{readMemoryText().then(t=>{t.length&&t[0].contentText?(window.editor.setValue(t[0].contentText),e()):(window.editor.setValue(welcomeText),e())})})}const regs={markHighlight:/@@(.*?)@@/,emoji:/^:([a-zA-Z0-9_\+\-]+):/},newTokenizer={heading(e){return e.match(/^#{1,6}\s.*/),!1},codespan(e){return e.match(/^\&+([^\&\n]+?)\&+/),!1}},newRenderer={paragraph(e){return`<p class="line-hilight">${e}</p>`},heading(e,t){return`
            <h${t}  class="line-hilight">
              <a href="#">
                <span class="header-link"></span>
              </a>
              ${e}
            </h${t}>`},code(code,lang,_escaped){let finalCodeBlock;return lang=="js-run"?(new vconsole,`${eval(code)}`):(hljs.getLanguage(lang)?finalCodeBlock=`<pre><code class="language-${lang} ">${code}</code></pre>`:lang=="mermaid"?finalCodeBlock=`<div class="language-mermaid language-plaintext">${code}</div>`:finalCodeBlock=`<pre><code class="language-plaintext">${code}</code></pre>`,finalCodeBlock)},image(e,t,n){const r="#";let a=Math.random(),i="auto",o="",l="L",s=n.split(r);if(s.length>1)for(let d=0;d<s.length;d++){let c=s[d];c==="s"&&(o+="box-shadow: rgb(199 199 199) 1vh 2vh 21px"),c==="s1"&&(o+="box-shadow: rgb(146 146 146) 1vh 2vh 21px;"),c==="s2"&&(o+="box-shadow: rgb(32 32 32 / 86%) 1vh 2vh 21px"),(c==="C"||c=="c")&&(l="C"),(c==="R"||c=="r")&&(l="R"),c.startsWith("w")&&(i=s[d].substring(1),i.endsWith("%")||(i+="px"))}return`<div class="imgBox-r FLEX ${a} ${l=="C"?" JUS-CENTER":l=="R"?"JUS-RIGHT":""}" ><img class="img_resize_transition" width="${i}" style="${o}" src="${e}" alt="${n}"></div>`}},importUrlExtension={extensions:[{name:"importUrl",level:"block",start(e){return e.indexOf(`
:`)},tokenizer(e){const n=/^:(https?:\/\/.+?):/.exec(e);if(n)return{type:"importUrl",raw:n[0],url:n[1],html:""}},renderer(e){return`<iframe style="border:none" src="${e.url}" width="100%" height="100%"></iframe>`}}]},markItExtension={extensions:[{name:"markIt",level:"inline",start(e){var t;return(t=e.match(/@@/))==null?void 0:t.index},tokenizer(e,t){const n=e.match(regs.markHighlight),r=n?n[1]:"";if(n)return{type:"markIt",raw:e,text:r}},renderer(e){return`${e.raw.replace(regs.markHighlight,`<mark>${e.text}</mark>`)}`}}]},imgExtension={name:"newRenderer",level:"block",tokenizer:newTokenizer,renderer:newRenderer,async:!0,async walkTokens(e){if(e.type,e.type==="image"){const t=e.href;if(t!=null&&t.match(/vf/)){let n=(t.match(/vf\/(\d+)/)?t.match(/vf\/(\d+)/)[1]:0).toString(),r=await readMemoryImg("uuid",parseInt(n)).then(a=>a[0]?a[0].imgBase64:0);e.href=r}}else e.type==="code"||e.type}},emojiExtension={extensions:[{name:"emoji",level:"inline",start(e){var t;return(t=e.match(/:/))==null?void 0:t.index},tokenizer(e,t){const n=e.match(regs.emoji);return n?{type:"emoji",raw:n[0],text:n[1]}:!1},renderer(e){return has(e.raw)?emojify(e.raw):e.raw}}]};class OperateLocalStorage{constructor(){w(this,"version","0.2")}setItem(t,n){localStorage.setItem(t,n)}getItem(t){return localStorage.getItem(t)?localStorage.getItem(t):""}removeItem(t){localStorage.removeItem(t)}}class ConfigStore{constructor({themeState:t,fileManagerState:n,emojiPickerState:r,contextMenuClickPosition:a,settingsConfig:i}){w(this,"themeState");w(this,"fileManagerState");w(this,"emojiPickerState");w(this,"contextMenuClickPosition");w(this,"settingsConfig");makeAutoObservable(this,{themeState:observable,fileManagerState:observable,emojiPickerState:observable,contextMenuClickPosition:observable,settingsConfig:observable}),this.themeState=t,this.fileManagerState=n,this.emojiPickerState=r,this.contextMenuClickPosition=a,this.settingsConfig=i}getAllConfig(){let t={};return Object.getOwnPropertyNames(this).forEach((n,r)=>{t[n]=this[n]}),t}}function markdownitLineNumber(e,t){const n=function(r,a,i,o,l){let s;return r[a].map&&r[a].level===0&&(s=r[a].map[0],r[a].attrSet("data-line",String(s))),l.renderToken(r,a,i)};e.renderer.rules.paragraph_open=e.renderer.rules.heading_open=e.renderer.rules.table_open=e.renderer.rules.bullet_list_open=n}let myPlugin=function(e){e.core.ruler.before("inline","myrule",function(t){var n=t.tokens;for(let r=0;r<n.length;r++)n[r].content&&n[r].content.indexOf("MYRULE")})},imagePlugin=function(e){e.renderer.rules.image,e.renderer.rules.image=function(t,n,r,a,i){var f;const o=t[n],l="#";let s=o.attrs[o.attrIndex("src")][1],d=o.content;o&&((f=o.attrGet("src"))!=null&&f.startsWith("/vf/"))&&a.vfImgSrcArr&&(s=a.vfImgSrcArr[a.vfImgSeq++]);let c="auto",u="",m="L",h=d.split(l);if(h.length>1)for(let x=0;x<h.length;x++){let p=h[x];p==="s"&&(u+="box-shadow: rgb(199 199 199) 1vh 2vh 21px"),p==="s1"&&(u+="box-shadow: rgb(146 146 146) 1vh 2vh 21px;"),p==="s2"&&(u+="box-shadow: rgb(32 32 32 / 86%) 1vh 2vh 21px"),(p==="C"||p=="c")&&(m="C"),(p==="R"||p=="r")&&(m="R"),p.startsWith("w")&&(c=h[x].substring(1),c.endsWith("%")||(c+="px"))}return`<div class="imgBox-r FLEX  ${m=="C"?" JUS-CENTER":m=="R"?"JUS-RIGHT":""}" ><img class="img_resize_transition" width="${c}" style="${u}" src="${s}" alt="${d}">
    </div>`}},opLocalStorage=new OperateLocalStorage;function changeTheme(e){e=="light"?(useConfig().themeState="light",opLocalStorage.setItem("themeState","light")):(useConfig().themeState="dark",opLocalStorage.setItem("themeState","dark"))}function getTheme(){return useConfig().themeState}function changeEmojiPickerState(e){e=="on"?(useConfig().emojiPickerState="on",opLocalStorage.setItem("emojiPickerState","on")):(useConfig().emojiPickerState="off",opLocalStorage.setItem("emojiPickerState","off"))}function getEmojiPickerState(){return useConfig().emojiPickerState}function setContextMenuClickPosition(e){if(e.posx&&e.posy)useConfig().contextMenuClickPosition=e;else return!1}function getContextMenuClickPosition(){return useConfig().contextMenuClickPosition}function changeSettings(e){const t=getSettings(),n=updateSettingsConfig(t,e);useConfig().settingsConfig=n,opLocalStorage.setItem("settingsConfig",JSON.stringify(n))}function getSettings(){return toJS(useConfig().settingsConfig)}function updateSettingsConfig(e,t){for(const n in t)n in e?Object.assign(e[n],t[n]):e[n]=t[n];return e}function changeFileManagerState(e){useConfig().fileManagerState=e}function getFileManagerState(){return useConfig().fileManagerState}let codePlugin=function(e){const t=e.renderer.rules.code_block;e.renderer.rules.fence=function(n,r,a,i,o){let l;n[r].map&&n[r].level===0&&(l=n[r].map[0],n[r].attrSet("data-line",String(l)));let s=n[r].info,d=n[r].content;if(d=d.replace(/</g,"&lt;").replace(/>/g,"&gt;"),s==="mermaid"){if(i.mermaidParsedArr)return`<div data-line="${l}" class="language-mermaid language-plaintext">
        ${i.mermaidParsedArr[i.mermaidSeq++]}
        </div>`}else return hljs.getLanguage(s)?`<pre class="language-code" data-line="${l}"><code class="language-${s} ${getTheme()==="light"?"":"hljs-dark"}">${d}</code></pre>`:`<div class="code-container" data-line="${l}">
      <pre><code class="language-plaintext">${d}</code></pre>
    </div>`;return t(n,r,a,i,o)}},cluePlugin=function(e){function t(n){const r=n.tokens;for(let a=0;a<r.length;a++)if(r[a].type==="inline"){let i=r[a].children;for(let o=0;o<i.length;o++){const l=i[o];if(l.type==="text"&&l.content){const d=l.content.match(/\^(.*?)\^(.*?)\#$/);if(d){const c=new n.Token("html_block","",0);c.content=`<div class="${d[2]}">${e.render(d[1])}</div>`,i[o]=c,o++}}}}}e.core.ruler.push("my_rule1",t),e.inline.ruler.before("emphasis","mark",(n,r)=>!1)};function customAlignPlugin(e){e.core.ruler.push("custom_align",function(t){let n=null;t.tokens.forEach((r,a)=>{if(r.type==="paragraph_open"){let i=t.tokens[a+1];i&&i.type==="inline"&&i.children.forEach(o=>{if(o.type==="text"){const l=o.content;switch(l.slice(-2)){case"||":o.content=l.slice(0,-2),n="C";break;case">>":o.content=l.slice(0,-2),n="R";break}}})}n&&r.type==="paragraph_open"&&(r.attrPush(["class",n]),n=null)})})}function customAlignPluginHeading(e){e.core.ruler.push("custom_align_heading",function(t){let n=null;t.tokens.forEach((r,a)=>{if(r.type==="heading_open"){let i=t.tokens[a+1];i&&i.type==="inline"&&i.children.forEach(o=>{if(o.type==="text"){const l=o.content;switch(l.slice(-2)){case"||":o.content=l.slice(0,-2),n="C";break;case">>":o.content=l.slice(0,-2),n="R";break}}})}n&&r.type==="heading_open"&&(r.attrPush(["class",n]),n=null)})})}function preViewClickEvent(e,t,n=e.createDecorationsCollection()){document.getElementById("view-area").addEventListener("dblclick",function(r){let a=r.target,i=0;if(a!==this){for(;a;){if(a.hasAttribute("data-line")){i=parseInt(a.getAttribute("data-line"));break}a=a.parentElement}i&&(e.setPosition({lineNumber:i+1,column:1}),e.revealLineInCenter(i+1,1),n.clear(),n.set([{range:new t.Range(i+1,1,i+1,1),options:{isWholeLine:!0,className:"HILIGHT-MONACO",zIndex:0}}]))}})}const katex=window.katex;function isValidDelim(e,t){var n,r,a=e.posMax,i=!0,o=!0;return n=t>0?e.src.charCodeAt(t-1):-1,r=t+1<=a?e.src.charCodeAt(t+1):-1,(n===32||n===9||r>=48&&r<=57)&&(o=!1),(r===32||r===9)&&(i=!1),{can_open:i,can_close:o}}function math_inline(e,t){var n,r,a,i,o;if(e.src[e.pos]!=="$")return!1;if(i=isValidDelim(e,e.pos),!i.can_open)return t||(e.pending+="$"),e.pos+=1,!0;for(n=e.pos+1,r=n;(r=e.src.indexOf("$",r))!==-1;){for(o=r-1;e.src[o]==="\\";)o-=1;if((r-o)%2==1)break;r+=1}return r===-1?(t||(e.pending+="$"),e.pos=n,!0):r-n===0||r-n===2?(t||(e.pending+="$$"),e.pos=n+1,!0):(i=isValidDelim(e,r),i.can_close?(t||(a=e.push("math_inline","math",0),a.markup="$",a.content=e.src.slice(n,r)),e.pos=r+1,!0):(t||(e.pending+="$"),e.pos=n,!0))}function math_block(e,t,n,r){var a,i,o,l,s=!1,d,c=e.bMarks[t]+e.tShift[t],u=e.eMarks[t];if(c+2>u||e.src.slice(c,c+2)!=="$$")return!1;if(c+=2,a=e.src.slice(c,u),r)return!0;for(a.trim().slice(-2)==="$$"&&(a=a.trim().slice(0,-2),s=!0),o=t;!s&&(o++,!(o>=n||(c=e.bMarks[o]+e.tShift[o],u=e.eMarks[o],c<u&&e.tShift[o]<e.blkIndent)));)e.src.slice(c,u).trim().slice(-2)==="$$"&&(l=e.src.slice(0,u).lastIndexOf("$$"),i=e.src.slice(c,l),s=!0);return e.line=o+1,d=e.push("math_block","math",0),d.block=!0,d.content=(a&&a.trim()?a+`
`:"")+e.getLines(t+1,o,e.tShift[t],!0)+(i&&i.trim()?i:""),d.map=[t,e.line],d.markup="$$",!0}function markdownItLatex(e,t){t=t||{throwOnError:!1,strict:!1};var n=function(o){if(t.displayMode=!1,o)try{return katex.renderToString(o,t)}catch{return o}else return"Latex Missing"},r=function(o,l){return n(o[l].content)},a=function(o,l){t.displayMode=!0;let s;if(l.map&&l.level===0&&(s=l.map[0]),o)try{return`<p data-line=${String(s)}>`+katex.renderToString(o,t)+"</p>"}catch{return o}else return"LATEX MISSING"},i=function(o,l){return a(o[l].content,o[l])+`
`};e.inline.ruler.after("escape","math_inline",math_inline),e.block.ruler.after("blockquote","math_block",math_block,{alt:["paragraph","reference","blockquote","list"]}),e.renderer.rules.math_inline=r,e.renderer.rules.math_block=i}const noteUseArco=(e,t,n)=>{const r=(n==null?void 0:n.kind)??"success",a=(n==null?void 0:n.position)??"bottomRight";Notification[r]({title:e,content:t,position:a})},markdownItIncrementalDOM=window.markdownitIncrementalDOM;function markdownParser(){return markdownIt({html:!0,linkify:!0,typographer:!0,breaks:!0}).use(markdownitLineNumber).use(markdownItGithubToc,{anchorLinkSymbol:"",anchorLinkBefore:!1}).use(myPlugin).use(imagePlugin).use(mdItMultimdTable,{multiline:!0,rowspan:!0,headerless:!0,multibody:!0,aotolabel:!0}).use(codePlugin).use(cluePlugin).use(markdownitFootNote).use(customAlignPlugin).use(customAlignPluginHeading).use(full).use(markdownItLatex).use(markdownItTaskLists).use(markdownItIncrementalDOM)}class settingsClass{constructor(){}markedInit(){marked.use({mangle:!1,headerIds:!1,strict:!1,extensions:[],async:!0,lineNumber:!0},importUrlExtension,imgExtension,markItExtension,emojiExtension)}mermaidInit(){const t={securityLevel:"loose",logLevel:4,startOnLoad:!1,gantt:{fontSize:19,sectionFontSize:"16",numberSectionStyles:10,useMaxWidth:!0},theme:getSettings().advanced.mermaidTheme};mermaid.parseError=n=>{},mermaid.initialize(t),mermaid.mermaidAPI.initialize(t)}hljsInit(){hljs.configure({ignoreUnescapedHTML:!0})}settingsAllInit(){this.markedInit(),this.mermaidInit(),this.hljsInit()}static newSettings(){return new this}}function allInit(e=window.editor,t=window.monaco,n){new settingsClass().settingsAllInit(),blankTextInit().then(async()=>{await mdConverter(),n&&n(),await kit.sleep(110),noteUseArco("已更新到最新版本","当前版本:v2.2.1"),await kit.sleep(680),noteUseArco("当前版本新增特性","文件管理器",{kind:"info"}),noteUseArco("Bug修复情况","修复增量渲染“<-”时会出现的问题",{kind:"info"})}),window._deco=e.createDecorationsCollection(),window._speechData={processing:!1,speechResult:"",speech:null},preViewClickEvent(e,t,window._deco)}const defaultConfig={themeState:"light",fileManagerState:!1,emojiPickerState:"off",contextMenuClickPosition:{posx:20,posy:20},settingsConfig:{basic:{syncScroll:!1,speechLanguage:"zh-CN",fileEditLocal:!0},advanced:{mermaidTheme:"default"}}},normalSettingsKey=[...Object.keys(defaultConfig.settingsConfig.basic),...Object.keys(defaultConfig.settingsConfig.advanced)];Object.keys(defaultConfig.settingsConfig.advanced);const normalMermaidTheme=["default","forest","dark","neutral"],normalMermaidThemeMap=["default (默认，才是最美的！)","forest (说真的，很绿)","dark (说真的，很黑)","neutral (清心寡欲，出家必选)"];function configInit(e){function t(a){typeof n[a]=="object"?r.setItem(a,JSON.stringify(n[a])):r.setItem(a,n[a])}let n=e,r=new OperateLocalStorage;for(let a in n)if(r.getItem(a))if(a=="themeState"||a=="emojiPickerState"||a=="settingsConfig")try{if(typeof n[a]=="object"){const i=JSON.parse(r.getItem(a).toString());for(let o in i)Object.keys(i[o]).forEach(l=>{if(!normalSettingsKey.includes(l))return t(a),n});n[a]=JSON.parse(r.getItem(a).toString())}else n[a]=r.getItem(a).toString()}catch(i){console.log(i),t(a)}else t(a);else t(a);return n}const configStore=new ConfigStore(configInit(defaultConfig)),useConfig=()=>configStore;async function prepareParser(e){async function t(c){let u=c.attrGet("src");if(u.startsWith("/vf/")){let m=u.match(/\d+/)[0];return await readMemoryImg("uuid",parseInt(m)).then(h=>h[0].imgBase64)}}async function n(c){let u=c.content,m;try{return await mermaid.parse(u,{suppressErrors:!1}),await mermaid.parse(u,{suppressErrors:!0})&&(m=await mermaid.render(`_mermaidSvg_${kit.getUUID().slice(0,5)}`,u)),m.svg}catch(h){return`<pre class="ERR">${h}</pre>`}}let r=[],a=[],i=[],o=[],l=[],s=markdownParser();s.renderer.rules.image=function(c,u){var m;return(m=c[u].attrGet("src"))!=null&&m.startsWith("/vf/")&&r.push(c[u]),""},s.renderer.rules.fence=function(c,u,m,h,f){const x=c[u].info;return x==="mermaid"?(a.push(c[u]),""):((x==="py"||x==="python")&&i.push(c[u]),"")},s.render(e,{});for(const c of r){let u=await t(c);o.push(u)}for(const c of a){let u=await n(c);l.push(u)}return{vfImgSrcArr:o,vfImgSeq:0,mermaidParsedArr:l,mermaidSeq:0}}const IncrementalDOM=window.IncrementalDOM;async function mdConverter(e=!1){let t=getMdTextFromMonaco();t=PageBreaker(t);let n=await prepareParser(t);e?document.getElementById("view-area").innerHTML=markdownParser().render(t,n):IncrementalDOM.patch(document.getElementById("view-area"),markdownParser().renderToIncrementalDOM(t,n)),hljs.highlightAll()}const React$9=window.React,ColorButton=styled(Button)(({theme:e})=>({color:e.palette.mode==="light"?"rgb(55, 65, 81)":"#FFFFFF",marginLeft:10,fontFamily:["electronicFont"].join(","),backgroundColor:e.palette.mode==="light"?"#FFFFFF":"","&:hover":{backgroundColor:e.palette.mode==="light"?grey[300]:""}}));function CustomizedButtons(e){return React$9.createElement(ColorButton,{id:"demo-customized-button",href:e.href?e.href:void 0,"aria-controls":e.open?"demo-customized-menu":void 0,"aria-haspopup":"true","aria-expanded":e.open?"true":void 0,disableElevation:!0,onClick:e.onClick,onMouseOver:e.onHover,endIcon:e.endIcon,startIcon:e.startIcon?e.startIcon:void 0,variant:"contained"},e.children)}function myPrint(){kit.sleep(400).then(()=>{window.print()})}const svg_1=""+new URL("../2904f250.aboutBox关闭.svg",import.meta.url).href;let aboutMd;const aboutBox=async()=>{let e=`
<div class="closeBox" id="closeAbout">
<img id="closeAboutSvg" class="closeSvg" src=${svg_1} alt="">
</div>
`;await fetch("https://cdn.jsdmirror.com/gh/LiWeny16/MarkdownOnline@main/src/assets/about.md").then(async n=>{aboutMd=n.text(),document.getElementById("aboutMd")&&(document.getElementById("aboutMd").innerHTML=e+t(await aboutMd))}).catch(n=>{console.error("Error fetching markdown:",n)});function t(n){return markdownParser().render(n)}document.getElementById("closeAboutSvg").addEventListener("click",()=>{document.getElementById("aboutBox").style.display="none"}),document.getElementById("aboutBox").addEventListener("click",n=>{n.target==document.getElementById("markdownParser")&&(document.getElementById("aboutBox").style.display="none")}),document.getElementById("aboutBox").style.display="block"},supportFileTypes=[".md",".py",".js",".ts"];class FileManager{constructor(t){w(this,"fileHandle",null);t?this.fileHandle=t:this.fileHandle=window._fileHandle}async openSingleFile(){try{return[this.fileHandle]=await window.showOpenFilePicker({multiple:!1,types:[{description:"Text Files",accept:{"text/plain":supportFileTypes}}]}),window._fileHandle=this.fileHandle,this.fileHandle}catch(t){return console.error("Error opening file:",t),null}}async readFile(){return this.fileHandle?await(await this.fileHandle.getFile()).text():void 0}async saveFileSilently(t){if(!this.fileHandle)return;const n=await this.fileHandle.createWritable(),r=t;return await n.write(r),await n.close(),!0}async saveAsFile(t){try{const r=await(await window.showSaveFilePicker({suggestedName:"text",types:[{description:"Text Files",accept:{"text/plain":supportFileTypes}}]})).createWritable();await r.write(t??"Sth.."),await r.close(),console.log("File saved successfully as new file.")}catch(n){console.error("Save As operation cancelled or failed:",n)}}}function replaceMonacoAll(e,t,n=""){const r=t??window.editor,a=e.editor.getEditors()[0].getModel().getFullModelRange();r.executeEdits("my-replace2",[{range:a,text:n,forceMoveMarkers:!0}])}const React$8=window.React,IOSSwitch=styled(e=>React$8.createElement(Switch,{focusVisibleClassName:".Mui-focusVisible",disableRipple:!0,...e}))(({theme:e})=>({width:42,height:26,padding:0,"& .MuiSwitch-switchBase":{padding:0,margin:2,transitionDuration:"300ms","&.Mui-checked":{transform:"translateX(16px)",color:"#fff","& + .MuiSwitch-track":{backgroundColor:e.palette.mode==="dark"?"#2ECA45":"#65C466",opacity:1,border:0},"&.Mui-disabled + .MuiSwitch-track":{opacity:.5}},"&.Mui-focusVisible .MuiSwitch-thumb":{color:"#33cf4d",border:"6px solid #fff"},"&.Mui-disabled .MuiSwitch-thumb":{color:e.palette.mode==="light"?e.palette.grey[100]:e.palette.grey[600]},"&.Mui-disabled + .MuiSwitch-track":{opacity:e.palette.mode==="light"?.7:.3}},"& .MuiSwitch-thumb":{boxSizing:"border-box",width:22,height:22},"& .MuiSwitch-track":{borderRadius:26/2,backgroundColor:e.palette.mode==="light"?"#E9E9EA":"#39393D",opacity:1,transition:e.transitions.create(["background-color"],{duration:500})}})),alertUseArco=(e,t,n)=>{const r=(n==null?void 0:n.zIndex)??9999,a=(n==null?void 0:n.kind)??"success";let i=document.getElementsByClassName("arco-message-wrapper arco-message-wrapper-top")[0];i?i.style.zIndex=String(r)??r:kit.addStyle(`.arco-message-wrapper .arco-message-wrapper-top{z-index:${r}}`),Message[a]({style:{position:"relative",zIndex:r},content:e,closable:!0,duration:t??2500,position:"top",...n==null?void 0:n.extraConfig})},React$7=window.React,ITEMS=[{id:"1",label:"Documents",children:[{id:"1.1",label:"Company",children:[{id:"1.1.1",label:"Invoice",fileType:"pdf"},{id:"1.1.4",label:"Equipment",fileType:"pdf"},{id:"1.1.5",label:"Video conference",fileType:"video"}]}]},{id:"2",label:"Bookmarked",children:[{id:"2.1",label:"Learning materials",fileType:"folder"},{id:"2.2",label:"News",fileType:"folder"}]},{id:"3",label:"Bookmarked",children:[],fileType:"folder"}];function DotIcon(){return React$7.createElement(Box$1,{sx:{width:6,height:6,borderRadius:"70%",bgcolor:"warning.main",display:"inline-block",verticalAlign:"middle",zIndex:1,mx:1}})}const StyledTreeItemRoot=styled(TreeItem2Root)(({theme:e})=>({color:e.palette.mode==="light"?e.palette.grey[800]:e.palette.grey[400],position:"relative",[`& .${treeItemClasses.groupTransition}`]:{marginLeft:e.spacing(3.5)}})),CustomTreeItemContent=styled(TreeItem2Content)(({theme:e})=>({flexDirection:"row-reverse",borderRadius:e.spacing(.7),marginBottom:e.spacing(.5),marginTop:e.spacing(.5),padding:e.spacing(.5),paddingRight:e.spacing(1),fontWeight:500,[`& .${treeItemClasses.iconContainer}`]:{marginRight:e.spacing(2)},"&.Mui-expanded ":{"&:not(.Mui-focused, .Mui-selected, .Mui-selected.Mui-focused) .labelIcon":{color:e.palette.mode==="light"?e.palette.primary.main:e.palette.primary.dark},"&::before":{content:'""',display:"block",position:"absolute",left:"16px",top:"44px",height:"calc(100% - 48px)",width:"1.5px",backgroundColor:e.palette.mode==="light"?e.palette.grey[300]:e.palette.grey[700]}},"&:hover":{backgroundColor:alpha(e.palette.primary.main,.1),color:e.palette.mode==="light"?e.palette.primary.main:"white"},"&.Mui-focused, &.Mui-selected, &.Mui-selected.Mui-focused":{backgroundColor:e.palette.mode==="light"?e.palette.primary.main:e.palette.primary.dark,color:e.palette.primary.contrastText}}));function TransitionComponent(e){return React$7.createElement(Collapse,{...e})}const StyledTreeItemLabelText=styled(Typography)({color:"inherit",fontFamily:"General Sans",fontWeight:500});function CustomLabel({icon:e,expandable:t,children:n,...r}){return React$7.createElement(TreeItem2Label,{...r,sx:{display:"flex",alignItems:"center"}},e&&React$7.createElement(Box$1,{component:e,className:"labelIcon",color:"inherit",sx:{mr:1,fontSize:"1.2rem"}}),React$7.createElement(StyledTreeItemLabelText,{variant:"body2"},n),t&&React$7.createElement(DotIcon,null))}const isExpandable=e=>Array.isArray(e)?e.length>0&&e.some(isExpandable):!!e,getIconFromFileType=e=>{switch(e){case"image":return default_1$7;case"pdf":return default_1$6;case"doc":return default_1$2;case"video":return default_1$5;case"folder":return default_1$4;case"pinned":return default_1$3;case"trash":return default_1$1;default:return default_1$2}},CustomTreeItem=React$7.forwardRef(function e(t,n){const{id:r,itemId:a,label:i,disabled:o,children:l,...s}=t,{getRootProps:d,getContentProps:c,getIconContainerProps:u,getLabelProps:m,getGroupTransitionProps:h,status:f,publicAPI:x}=useTreeItem2({id:r,itemId:a,children:l,label:i,disabled:o,rootRef:n}),p=x.getItem(a),R=isExpandable(l);let b;return R?b=default_1$4:p.fileType&&(b=getIconFromFileType(p.fileType)),React$7.createElement(TreeItem2Provider,{itemId:a},React$7.createElement(StyledTreeItemRoot,{...d(s)},React$7.createElement(CustomTreeItemContent,{...c({className:clsx("content",{"Mui-expanded":f.expanded,"Mui-selected":f.selected,"Mui-focused":f.focused,"Mui-disabled":f.disabled})})},React$7.createElement(TreeItem2IconContainer,{...u()},React$7.createElement(TreeItem2Icon,{status:f})),React$7.createElement(CustomLabel,{...m({icon:b,expandable:R&&f.expanded})})),l&&React$7.createElement(TransitionComponent,{...h()})))});function FileExplorer(e){return React$7.createElement(RichTreeView,{items:e.fileDirectoryArr??ITEMS,"aria-label":"file explorer",defaultExpandedItems:["1","1.1"],defaultSelectedItems:"1.1",sx:{height:"fit-content",flexGrow:1,maxWidth:400,overflowY:"auto"},slots:{item:CustomTreeItem}})}const React$6=window.React,fileManager=new FileManager,FileDrawer=observer(function e(){const[t,n]=React$6.useState([]),[r,a]=React$6.useState(""),i=useTheme(),o=s=>()=>{changeFileManagerState(s)},l=(s,d)=>{changeSettings({basic:{fileEditLocal:d}})};return React$6.createElement(React$6.Fragment,null,React$6.createElement(Drawer,{sx:{"& .MuiBackdrop-root":{backgroundColor:"transparent"}},anchor:"right",open:getFileManagerState(),onClose:o(!1)},React$6.createElement(Box$1,{sx:{padding:"20px",width:"26svw",display:"flex",alignItems:"center",justifyContent:"center",height:"100svh",flexDirection:"column"}},React$6.createElement(Box$1,{className:"FLEX COL"},React$6.createElement(FileExplorer,{fileDirectoryArr:t}),React$6.createElement(Typography,null,getSettings().basic.fileEditLocal?r:""),React$6.createElement(Button,{sx:{mb:"10px"},onClick:async()=>{try{const s=await fileManager.openSingleFile();if(a((s==null?void 0:s.name)??""),s){alertUseArco("正在打开本地文件，别急，你给我等会😅");const d=await fileManager.readFile();d&&(replaceMonacoAll(window.monaco,window.editor,d),alertUseArco(`打开${s==null?void 0:s.name}成功！😀`))}else alertUseArco("左顾右盼，活在梦幻?",2500,{kind:"warning"})}catch{alertUseArco("尼玛的报错乐🤣",2e3,{kind:"error"})}},variant:"contained",color:"primary"},"打开文件"),React$6.createElement(Button,{sx:{mb:"10px"},variant:"contained",disabled:!0,color:"primary",onClick:async()=>{}},"打开文件夹"),React$6.createElement(Button,{sx:{mb:"10px"},variant:"contained",onClick:()=>{fileManager.saveAsFile(getMdTextFromMonaco())}},"另存为"),React$6.createElement(Box$1,{className:"FLEX COW ALI-CEN"},React$6.createElement(Typography,{sx:{mr:"10px",fontSize:"17px"},color:i.palette.info.contrastText},"同步本地编辑"),React$6.createElement(IOSSwitch,{checked:getSettings().basic.fileEditLocal,size:"small",inputProps:{"aria-label":"controlled"},onChange:l}))))))}),React$5=window.React,Suspense$1=window.React.Suspense,LazyMenu=React$5.lazy(()=>__vitePreload(()=>import("./Menu-7cce5c7b.js"),["./Menu-7cce5c7b.js","./@mui-2be9fea0.js","./react-2b221fbb.js","./@babel-f8d566ba.js","./clsx-0839fdbe.js","./@emotion-d13e5fae.js","./hoist-non-react-statics-3f8ebaa8.js","./stylis-79144faa.js","./react-is-e5978b8b.js","./react-transition-group-bc100b23.js","./@popperjs-f3391c26.js","./prop-types-7395632d.js","./mobx-react-1a77d2ab.js","./mobx-react-lite-15e39ab3.js","./use-sync-external-store-b84fba6b.js","./react-dom-d3bdc6a0.js","./@monaco-editor-38e7c7a5.js","./state-local-dd516420.js","./react-resizable-8f73e4ed.js","./react-draggable-b033082a.js","..\\f65e29ed.react-resizable.css"],import.meta.url)),runTo=(e,t)=>{kit.sleep(t).then(()=>{window.location.href=e})},handleHomeClick=()=>{runTo("https://bigonion.cn",300)},boxShadow="0px 2px 4px -1px rgba(0,0,0,0.2), 0px 4px 5px 0px rgba(0,0,0,0.14), 0px 1px 10px 0px rgba(0,0,0,0.12);",drawerWidth=240,DrawerAppBar=observer(e=>{const t=useTheme(),{window:n}=e,[r,a]=React$5.useState(!1),i=()=>{a(d=>!d)},o=n!==void 0?()=>n().document.body:void 0,l=()=>{alertUseArco("此功能仍然在开发中",3e3,{kind:"info"})},s=React$5.createElement(Box$1,{onClick:i,sx:{textAlign:"center",height:"100%",bgcolor:"black"}},React$5.createElement(Typography,{variant:"h2",sx:{fontSize:"20px",my:2,color:"wheat",textAlign:"center",boxShadow}},"Markdown+ Online View"),React$5.createElement(List,{sx:{height:"100%",bgcolor:"background.paper"}},React$5.createElement(ListItem,null,React$5.createElement(ListItemButton,{onClick:handleHomeClick},React$5.createElement(ListItemAvatar,null,React$5.createElement(Avatar,null,React$5.createElement(default_1$c,null))),React$5.createElement(ListItemText,{primary:"Home",secondary:""}))),React$5.createElement(ListItem,null,React$5.createElement(ListItemButton,{onClick:l},React$5.createElement(ListItemAvatar,null,React$5.createElement(Avatar,null,React$5.createElement(default_1$7,null))),React$5.createElement(ListItemText,{primary:"Photos",secondary:""}))),React$5.createElement(ListItem,null,React$5.createElement(ListItemButton,{onClick:myPrint},React$5.createElement(ListItemAvatar,null,React$5.createElement(Avatar,null,React$5.createElement(default_1$d,null))),React$5.createElement(ListItemText,{primary:"Export",secondary:""}))),React$5.createElement(ListItem,null,React$5.createElement(ListItemButton,{onClick:()=>{aboutBox()}},React$5.createElement(ListItemAvatar,null,React$5.createElement(Avatar,null,React$5.createElement(default_1$e,null))),React$5.createElement(ListItemText,{primary:"About",secondary:""})))));return React$5.createElement(React$5.Fragment,null,React$5.createElement("div",{className:"FLEX header-app-bar",style:{flex:"0 0 8.7vh"}},React$5.createElement(CssBaseline,null),React$5.createElement(AppBar,{component:"nav",sx:{position:"inherit",justifyContent:"center",zIndex:100,height:"8.7vh",transition:"background-color 250ms cubic-bezier(0.4, 0, 0.2, 1) 0ms,box-shadow 250ms cubic-bezier(0.4, 0, 0.2, 1) 0ms,border-color 250ms cubic-bezier(0.4, 0, 0.2, 1) 0ms,color 250ms cubic-bezier(0.4, 0, 0.2, 1) 0ms"}},React$5.createElement(Toolbar,null,React$5.createElement(IconButton,{color:"inherit",onClick:i,sx:{mr:200,display:{sm:"none"}}},React$5.createElement(default_1$8,null)),React$5.createElement(default_1$9,{sx:{color:t.palette.mode=="light"?"black":"white",display:{xs:"none",md:"flex"},transition:"background-color 250ms cubic-bezier(0.4, 0, 0.2, 1) 0ms,box-shadow 250ms cubic-bezier(0.4, 0, 0.2, 1) 0ms,border-color 250ms cubic-bezier(0.4, 0, 0.2, 1) 0ms,color 250ms cubic-bezier(0.4, 0, 0.2, 1) 0ms",mr:1}}),React$5.createElement(Typography,{variant:"h1",component:"a",fontFamily:"monospace",href:"/",sx:{flexGrow:1,display:{xs:"none",sm:"block"},color:t.palette.mode==="light"?t.palette.primary.contrastText:t.palette.secondary.contrastText,fontFamily:"emoji",letterSpacing:".3rem",textDecoration:"none"}},React$5.createElement("h2",{style:{fontSize:"28px"}},"Markdown+ Online View")),React$5.createElement(Box$1,{sx:{display:{xs:"none",sm:"flex",flexDirection:"row"}}},React$5.createElement(CustomizedButtons,{href:"https://bigonion.cn",startIcon:React$5.createElement(default_1$a,null)},"首页"),React$5.createElement(CustomizedButtons,{onClick:()=>{aboutBox()},startIcon:React$5.createElement(default_1,null)},"关于"),React$5.createElement(Suspense$1,{fallback:React$5.createElement(CustomizedButtons,{open,endIcon:React$5.createElement(default_1$b,null)},"更多")},React$5.createElement(LazyMenu,null)),React$5.createElement(TemporaryDrawer,null),React$5.createElement(FileDrawer,null)))),React$5.createElement(Box$1,{sx:{display:{xs:"flex",sm:"none"}},component:"nav"},React$5.createElement(Drawer,{container:o,variant:"temporary",open:r,onClose:i,ModalProps:{keepMounted:!0},sx:{display:{xs:"block",sm:"none"},"& .MuiDrawer-paper":{boxSizing:"border-box",width:drawerWidth}}},s))))});async function save(e=null,t=!0){let n=getMdTextFromMonaco(),r="";if(t&&n!="null")try{fillInMemoryText(n),getSettings().basic.fileEditLocal?await new FileManager(window._fileHandle).saveFileSilently(n)?r="成功保存到本地！🎉":r="成功保存到浏览器！🎉(未打开本地文件)":r="成功保存到浏览器！🎉",alertUseArco(r)}catch{alertUseArco("你竟敢拒绝我。",2500,{kind:"error"})}else save()}async function isSaved(){return await readMemoryText().then(e=>{var t;return e?((t=e[0])==null?void 0:t.contentText)===getMdTextFromMonaco():!1})}function exeSyncScrollAction(e,t){if(getSettings().basic.syncScroll)alertUseArco("同步滚动已关闭 🧐 ",2e3),changeSettings({basic:{syncScroll:!1}});else{alertUseArco("同步滚动已开启 😍 ",2e3);const n=e.getScrollTop();e.setScrollTop(n+.3),e.setScrollTop(n-.3);const r=e.getVisibleRanges();if(r.length>0){const i=r[0].startLineNumber,o=document.getElementById("view-area");i==1&&o.scrollTo({top:0,behavior:"smooth"})}changeSettings({basic:{syncScroll:!0}})}}function exeFileManagerAction(e,t){getFileManagerState()?changeFileManagerState(!1):changeFileManagerState(!0)}function enableFastKeyEvent(){document.addEventListener("keydown",e=>{e.ctrlKey&&e.key=="q"&&(e.stopPropagation(),e.preventDefault(),exeSyncScrollAction(window.editor)),e.ctrlKey&&(e.altKey||e.shiftKey)&&e.key=="f"&&(e.stopPropagation(),e.preventDefault(),exeFileManagerAction()),e.ctrlKey&&e.key=="s"&&(e.stopPropagation(),e.preventDefault(),save()),e.ctrlKey&&e.key=="b"},!0)}function monacoPasteEvent(e,t){e.getContainerDomNode().addEventListener("paste",n=>{handlePasteEvent(n).then(r=>{if(r){let a="",i=new Date().getTime();for(let o=0;o<=r.length-1;o++)a+=`![我是图片](/vf/${i+o})`;fillInMemoryImgs(r,i),insertTextMonacoAtCursor(a,!0)}})},!0)}function handlePasteEvent(e){return new Promise(t=>{let r=e.clipboardData.items;const a=r.length;let i=[];for(let o=0;o<r.length;o++){let l=r[o];if(l.kind=="file"){e.preventDefault(),e.stopPropagation();let s=l.getAsFile(),d=new FileReader;d.onload=function(u){i.push(u.target.result),o===a-1&&t(i)};const c=s.type.split("/")[1];(c==="png"||c==="jpg"||c==="jpeg"||c==="webp"||c==="svg")&&d.readAsDataURL(s)}else t([])}})}let lock=!1,triggerTime=0;function triggerConverterEvent(e=2){let t,n;triggerTime++,lock?(clearTimeout(t),t=setTimeout(function(){mdConverter(),triggerTime=0},300)):(clearTimeout(n),triggerTime>=e?(lock=!0,mdConverter(),n=setTimeout(()=>{lock=!1,triggerTime=0},200)):mdConverter())}function getCommandPaletteText(){return document.getElementsByClassName("ibwrapper")[0]?document.getElementsByClassName("ibwrapper")[0].children[0].value:""}function exeTableAction(){console.log(getCommandPaletteText().split("#"));const e=getCommandPaletteText().split("#")[1],t=getCommandPaletteText().split("#")[2];insertTextMonacoAtCursor(generateMarkdownTable(e,t),!0)}function generateMarkdownTable(e,t){if(!e||!t)return"";let n="| ";for(let r=0;r<t;r++)n+=`Header  ${r+1} | `;n+=`
|`;for(let r=0;r<t;r++)n+="--- | ";for(let r=0;r<e;r++){n+=`
| `;for(let a=0;a<t;a++)n+=` Cell ${r+1}-${a+1} | `}return n}function exportAsImage(e=3,t="markdown.jpeg"){let n=document.getElementById("view-area").innerHTML;window.document.body.innerHTML=`<div id="exportBox" style="width:64vw" class="markdown-body markdown-body-${getTheme()==="light"?"light":"dark"}">${n}</div>`,kit.sleep(250).then(()=>{html2canvas(document.getElementById("exportBox"),{scale:e}).then(r=>{let a=r.toDataURL("image/png",.6);var i=document.createElement("a");i.download=t,i.href=a,i.click()}),kit.sleep(2e3).then(()=>{window.location.reload()})})}function exeInsertPageBreakerAction(){insertTextMonacoAtCursor(`|---|
`,!0)}function exeLatexBlockAction(e,t){const n=e.getPosition();n.column==1&&(insertTextMonacoAtCursor(`$$

$$`,!0),e.setPosition({column:1,lineNumber:n.lineNumber+1}))}function exeEmojiPickerAction(e,t){getEmojiPickerState()==="on"?changeEmojiPickerState("off"):changeEmojiPickerState("on")}let speechRecognition=(e,t=!0,n)=>{const r=new webkitSpeechRecognition||new SpeechRecognition;let a=!1;return r.lang=e,r.continuous=!0,r.interimResults=!1,t&&r.start(),r.onstart=()=>{a=!0},r.onresult=i=>{let o=i.results[i.results.length-1][0].transcript;o=o.replace(/ /g,""),window._speechData.speechResult=o,n(o.length),a===!1&&r.stopRecognition()},r.onerror=function(i){i.error=="not-allowed"?alertUseArco("语音权限被拒绝，世界，拒绝了我...",4500):console.log("语音识别错误:",i.error)},r.onend=()=>{console.log(a),a&&r.start()},r.stopRecognition=()=>{r.stop(),a=!1},{recognition:r,recognizing:a}};const speechLanguageMap=[["zh-CN","普通话"],["en-US","English"],["ja-JP","日本語"],["fr-ch","法语（瑞士）"],["ko","韩语"]];function exeSpeechPanelAction(e,t){const n=getSettings().basic.speechLanguage??"zh-CN";let r=a=>{insertTextMonacoAtCursor(window._speechData.speechResult,!0)};if(window._speechData.processing)alertUseArco("语音识别已关闭，嗯你闭嘴吧，我不听...",2e3),window._speechData.processing=!1,window._speechData.speech.stopRecognition(),window._speechData.speech=null,window._speechData.speechResult="";else{alertUseArco("语音识别已开启，嗯你说，我在听...",3e3),window._speechData.processing=!0;let{recognition:a}=speechRecognition(n,!0,r);window._speechData.speech=a}}function exeBoldAction(e,t){const n=e.getSelection();let a=e.getModel().getValueInRange(n),i;a.startsWith("**")&&a.endsWith("**")?i=a.slice(2,-2):i=`**${a}**`;var l=new t.Range(n.startLineNumber,n.startColumn,n.endLineNumber,n.endColumn);if(e.executeEdits("my-source",[{range:l,text:i,forceMoveMarkers:!1}]),i!==a){const s=new t.Selection(n.startLineNumber,n.startColumn,n.endLineNumber,n.startColumn+i.length);e.setSelection(s)}}function exeAlignRightAction(e,t){const n=e.getSelection(),r=e.getModel(),a=n.startLineNumber,i=r.getLineContent(a),o=i.length;let l="",s=o+1,d=o+1;const c=i.slice(-2);c===">>"?(l="",s=o-1):c==="||"?(l=">>",s=o-1):l=">>";const u=new t.Range(a,s,a,d);e.executeEdits("my-source",[{range:u,text:l,forceMoveMarkers:!0}]);const m=new t.Selection(a,s+l.length,a,s+l.length);e.setSelection(m)}function exeAlignCenterAction(e,t){const n=e.getSelection(),r=e.getModel(),a=n.startLineNumber,i=r.getLineContent(a),o=i.length;let l="",s=o+1,d=o+1;const c=i.slice(-2);c==="||"?(l="",s=o-1):c===">>"?(l="||",s=o-1):l="||";const u=new t.Range(a,s,a,d);e.executeEdits("my-source",[{range:u,text:l,forceMoveMarkers:!0}]);const m=new t.Selection(a,s+l.length,a,s+l.length);e.setSelection(m)}function exeItalicsAction(e,t){const n=e.getSelection();let a=e.getModel().getValueInRange(n),i;a.startsWith("*")&&a.endsWith("*")?i=a.slice(1,-1):i=`*${a}*`;var l=new t.Range(n.startLineNumber,n.startColumn,n.endLineNumber,n.endColumn);if(e.executeEdits("my-source",[{range:l,text:i,forceMoveMarkers:!1}]),i!==a){const s=new t.Selection(n.startLineNumber,n.startColumn,n.endLineNumber,n.startColumn+i.length);e.setSelection(s)}}function exeUnderlineAction(e,t){const n=e.getSelection();let a=e.getModel().getValueInRange(n),i;a.startsWith("<u>")&&a.endsWith("</u>")?i=a.slice(3,-4):i=`<u>${a}</u>`;var l=new t.Range(n.startLineNumber,n.startColumn,n.endLineNumber,n.endColumn);if(e.executeEdits("my-source",[{range:l,text:i,forceMoveMarkers:!1}]),i!==a){const s=new t.Selection(n.startLineNumber,n.startColumn,n.endLineNumber,n.startColumn+i.length);e.setSelection(s)}}function exeDeleteLinection(e,t){const n=e.getSelection();let a=e.getModel().getValueInRange(n),i;a.startsWith("~~")&&a.endsWith("~~")?i=a.slice(2,-2):i=`~~${a}~~`;var l=new t.Range(n.startLineNumber,n.startColumn,n.endLineNumber,n.endColumn);if(e.executeEdits("my-source",[{range:l,text:i,forceMoveMarkers:!1}]),i!==a){const s=new t.Selection(n.startLineNumber,n.startColumn,n.endLineNumber,n.startColumn+i.length);e.setSelection(s)}}function exeHeadingAction(e,t,n){const r=e.getSelection(),a=new t.Range(r.startLineNumber,1,r.startLineNumber,1),i=e.getModel().getLineContent(r.startLineNumber),o=/^(#+) /,l=i.match(o);if(!(["$"].includes(i[0])||i.match("```")))if(l&&l[1].length===n){console.log(i);const s=i.slice(l[0].length);e.executeEdits("",[{range:new t.Range(r.startLineNumber,1,r.startLineNumber,i.length+1),text:s}])}else{const s="#".repeat(n)+" ",d=l?new t.Range(r.startLineNumber,1,r.startLineNumber,l[0].length+1):a;e.executeEdits("",[{range:d,text:s}])}}function monacoKeyEvent(e,t){const n={save:t.KeyMod.CtrlCmd|t.KeyCode.KeyS,quotation:t.KeyMod.Shift|t.KeyCode.Quote,format:t.KeyMod.Shift|t.KeyCode.KeyF,pageBreaker:t.KeyMod.CtrlCmd|t.KeyMod.Alt|t.KeyCode.Enter,latexBlock:t.KeyMod.CtrlCmd|t.KeyCode.KeyM,voice2Words:t.KeyMod.CtrlCmd|t.KeyMod.Alt|t.KeyCode.KeyV,syncScroll:t.KeyMod.CtrlCmd|t.KeyCode.KeyQ,fileManager:t.KeyMod.CtrlCmd|t.KeyMod.Shift|t.KeyCode.KeyF,markdownTextEditFastKey:{bold:t.KeyMod.CtrlCmd|t.KeyCode.KeyB,italics:t.KeyMod.CtrlCmd|t.KeyCode.KeyI,underline:t.KeyMod.CtrlCmd|t.KeyCode.KeyU,alignCenter:t.KeyMod.CtrlCmd|t.KeyCode.KeyE,alignRight:t.KeyMod.CtrlCmd|t.KeyCode.KeyR,deleteLine:t.KeyMod.CtrlCmd|t.KeyCode.Backquote,h1:t.KeyMod.CtrlCmd|t.KeyCode.Digit1,h2:t.KeyMod.CtrlCmd|t.KeyCode.Digit2,h3:t.KeyMod.CtrlCmd|t.KeyCode.Digit3,h4:t.KeyMod.CtrlCmd|t.KeyCode.Digit4}};e.addAction({id:"show.emojiPicker",label:"打开表情包超市 🤪",keybindings:[],contextMenuGroupId:"navigation",contextMenuOrder:-100,run:()=>{exeEmojiPickerAction()}}),e.addAction({id:"insert.tableAny",label:"插入任意行和列,格式: table#x#x",keybindings:[],run:()=>{exeTableAction()}}),e.addAction({id:"reload-no-cache",label:"强制刷新Markdown在线",keybindings:[],run:()=>{window.location.reload(!0)}}),e.addAction({id:"export.asPDF",label:"保存并导出为PDF",keybindings:[],contextMenuGroupId:"navigation",contextMenuOrder:0,run:async()=>{await isSaved()?myPrint():(save(),kit.sleep(800).then(()=>{myPrint()}))}}),e.addAction({id:"export.asImg",label:"作为PNG格式的图片导出",keybindings:[],run:()=>{exportAsImage()}}),e.addAction({id:"insert.pageBreaker",label:"插入一个分页符",keybindings:[],contextMenuGroupId:"navigation",contextMenuOrder:0,run:()=>{exeInsertPageBreakerAction()}}),e.addAction({id:"insert.latexBlock",label:"插入一个LaTex语法块",keybindings:[n.latexBlock],contextMenuGroupId:"navigation",contextMenuOrder:0,run:()=>{exeLatexBlockAction(e)}}),e.addAction({id:"insert.voice2words",label:"语音转文字...嘟...喂...听得见吗....",keybindings:[n.voice2Words],contextMenuGroupId:"navigation",contextMenuOrder:1,run:()=>{exeSpeechPanelAction()}}),e.addAction({id:"command.syncScroll",label:"同步滚动 (开启/关闭)",keybindings:[n.syncScroll],contextMenuGroupId:"navigation",run:()=>{exeSyncScrollAction(e)}}),e.addAction({id:"command.fileManagerState",label:"文件管理器 (开启/关闭)",keybindings:[n.fileManager],contextMenuGroupId:"navigation",run:()=>{exeFileManagerAction()}}),e.addAction({id:"insert.bold",label:"加粗文本",keybindings:[n.markdownTextEditFastKey.bold],contextMenuGroupId:"navigation",run:()=>{exeBoldAction(e,t)}}),e.addAction({id:"insert.alignRight",label:"文本居右",keybindings:[n.markdownTextEditFastKey.alignRight],contextMenuGroupId:"navigation",run:()=>{exeAlignRightAction(e,t)}}),e.addAction({id:"insert.alignCenter",label:"文本居中",keybindings:[n.markdownTextEditFastKey.alignCenter],contextMenuGroupId:"navigation",run:()=>{exeAlignCenterAction(e,t)}}),e.addAction({id:"insert.italics",label:"斜体",keybindings:[n.markdownTextEditFastKey.italics],run:()=>{exeItalicsAction(e,t)}}),e.addAction({id:"insert.underline",label:"下划线",keybindings:[n.markdownTextEditFastKey.underline],run:()=>{exeUnderlineAction(e,t)}}),e.addAction({id:"insert.deleteLine",label:"删除线",keybindings:[n.markdownTextEditFastKey.deleteLine],run:()=>{exeDeleteLinection(e,t)}}),e.addAction({id:"insert.h1",label:"标题1",keybindings:[n.markdownTextEditFastKey.h1],run:()=>{exeHeadingAction(e,t,1)}}),e.addAction({id:"insert.h2",label:"标题2",keybindings:[n.markdownTextEditFastKey.h2],run:()=>{exeHeadingAction(e,t,2)}}),e.addAction({id:"insert.h3",label:"标题3",keybindings:[n.markdownTextEditFastKey.h3],run:()=>{exeHeadingAction(e,t,3)}}),e.addAction({id:"insert.h4",label:"标题4",keybindings:[n.markdownTextEditFastKey.h4],run:()=>{exeHeadingAction(e,t,4)}}),e.addAction({id:"reload",label:"重新加载窗口(Reload Window)",keybindings:[],contextMenuGroupId:"navigation",contextMenuOrder:100,run:()=>{window.location.reload()}})}function monacoSnippets(e,t){t.languages.registerCompletionItemProvider("markdown",{triggerCharacters:["/"],provideCompletionItems:(n,r,a)=>{const i=n.getValueInRange({startLineNumber:1,startColumn:1,endLineNumber:r.lineNumber,endColumn:r.column}),o={startLineNumber:r.lineNumber,startColumn:r.column-1,endLineNumber:r.lineNumber,endColumn:r.column};if(!isInLatexBlock(i)&&r.column===2)return{suggestions:[{label:"/code (代码块)",detail:"插入一段代码块",kind:t.languages.CompletionItemKind.Function,insertText:"\n```${1:js}\n${2:}\n```\n",insertTextRules:t.languages.CompletionItemInsertTextRule.InsertAsSnippet,sortText:"0",range:o},{label:"/image (图片)",detail:"插入图片",kind:t.languages.CompletionItemKind.Function,insertText:"![${1:}](${2:})",insertTextRules:t.languages.CompletionItemInsertTextRule.InsertAsSnippet,sortText:"1",range:o},{label:"/table-2x2 (表格)",detail:"插入一个2行2列的表格",kind:t.languages.CompletionItemKind.Function,insertText:"\n|${1:}    |${1:}     |\n|--- |---  |\n|${1:}    |${1:}     |\n",insertTextRules:t.languages.CompletionItemInsertTextRule.InsertAsSnippet,sortText:"2",range:o},{label:"/table-2x4 (表格)",detail:"插入一个2行4列的表格",kind:t.languages.CompletionItemKind.Function,insertText:"\n|${1:}    |${1:}    |${1:}    |${1:}    |\n|--- |--- |--- |--- |\n|${1:}    |${1:}    |${1:}    |${1:}    |\n",insertTextRules:t.languages.CompletionItemInsertTextRule.InsertAsSnippet,sortText:"3",range:o},{label:"/latex-block (公式块)",detail:"创建一个LaTex公式块",kind:t.languages.CompletionItemKind.Field,sortText:"4",range:o,insertText:`$$
\${1:}
$$
`,insertTextRules:t.languages.CompletionItemInsertTextRule.InsertAsSnippet},{label:"/list-in-order (有序列表)",detail:"创建有序列表",kind:t.languages.CompletionItemKind.Function,sortText:"5",range:o,insertText:`
1. \${1:}
2. \${2:}
3. \${3:}
`,insertTextRules:t.languages.CompletionItemInsertTextRule.InsertAsSnippet},{label:"/page-breaker (分页符)",detail:"插入一个分页符",kind:t.languages.CompletionItemKind.Function,sortText:"6",range:o,insertText:`
|---|
`,insertTextRules:t.languages.CompletionItemInsertTextRule.InsertAsSnippet},{label:"/mermaid-flowChart (流程图)",detail:"插入mermaid流程图",kind:t.languages.CompletionItemKind.Function,sortText:"7",range:o,insertText:"\n```mermaid\nflowchart TB\nStart --> Stop\n```\n",insertTextRules:t.languages.CompletionItemInsertTextRule.InsertAsSnippet},{label:"/mermaid-pie-chart (饼图)",detail:"插入mermaid饼图",kind:t.languages.CompletionItemKind.Function,sortText:"8",range:o,insertText:'\n```mermaid\npie title ${1:Pets adopted by volunteers}\n    "Dogs" : 386\n    "Cats" : 85\n    "Rats" : 15\n```\n',insertTextRules:t.languages.CompletionItemInsertTextRule.InsertAsSnippet},{label:"/mermaid-mind-map (思维导图)",detail:"插入mermaid思维导图",kind:t.languages.CompletionItemKind.Function,sortText:"9",range:o,insertText:`
\`\`\`mermaid
mindmap
Root
    A
      B
      C
\`\`\`
`,insertTextRules:t.languages.CompletionItemInsertTextRule.InsertAsSnippet},{label:"/mermaid-time-line (时间线图)",detail:"插入mermaid时间线图",kind:t.languages.CompletionItemKind.Function,sortText:"a1",range:o,insertText:`
\`\`\`mermaid
timeline
    title History of Social Media Platform
    2002 : LinkedIn
    2004 : Facebook
         : Google
    2005 : Youtube
    2006 : Twitter
\`\`\`
`,insertTextRules:t.languages.CompletionItemInsertTextRule.InsertAsSnippet},{label:"/mermaid-sequence (序列图)",detail:"插入mermaid序列图",kind:t.languages.CompletionItemKind.Function,sortText:"a2",range:o,insertText:`
\`\`\`mermaid
sequenceDiagram
    Alice->>+John: Hello John, how are you?
    Alice->>+John: John, can you hear me?
    John-->>-Alice: Hi Alice, I can hear you!
    John-->>-Alice: I feel great!
\`\`\`
`,insertTextRules:t.languages.CompletionItemInsertTextRule.InsertAsSnippet},{label:"/prettier-ignore (忽略格式化行)",detail:"下一行不进行prettier格式化",kind:t.languages.CompletionItemKind.Function,insertText:"<!-- prettier-ignore -->",insertTextRules:t.languages.CompletionItemInsertTextRule.InsertAsSnippet,range:o,sortText:"b1"},{label:"/prettier-ignore-block (忽略格式化块)",detail:"忽略prettier格式化块",kind:t.languages.CompletionItemKind.Function,insertText:`<!-- prettier-ignore-start -->
\${1:}
<!-- prettier-ignore-end -->`,insertTextRules:t.languages.CompletionItemInsertTextRule.InsertAsSnippet,range:o,sortText:"b2"}]}}}),t.languages.registerCompletionItemProvider("markdown",{triggerCharacters:["\\"],provideCompletionItems:(n,r,a)=>{const i=n.getValueInRange({startLineNumber:1,startColumn:1,endLineNumber:r.lineNumber,endColumn:r.column});if(isNeedToUseLatexIntellisense(i)){const o=Array.from([...delimiters0,...delimeterSizing0,...greekLetters0,...otherLetters0,...spacing0,...verticalLayout0,...logicAndSetTheory0,...macros0,...bigOperators0,...binaryOperators0,...binomialCoefficients0,...fractions0,...mathOperators0,...relations0,...negatedRelations0,...arrows0,...font0,...size0,...style0,...symbolsAndPunctuation0,...debugging0],(c,u)=>({label:`\\${c}`,kind:t.languages.CompletionItemKind.Function,insertText:c,insertTextRules:t.languages.CompletionItemInsertTextRule.InsertAsSnippet,sortText:/[A-Z]/.test(c[0])?"1":"0"})),l=Array.from([...accents1,...annotation1,...verticalLayout1,...overlap1,...spacing1,...logicAndSetTheory1,...mathOperators1,...sqrt1,...extensibleArrows1,...font1,...braketNotation1,...classAssignment1],(c,u)=>({label:`\\${c}`,kind:t.languages.CompletionItemKind.Function,insertText:`${c}{$1}`,insertTextRules:t.languages.CompletionItemInsertTextRule.InsertAsSnippet,sortText:/[A-Z]/.test(c[0])?"1":"0"})),s=Array.from([...verticalLayout2,...binomialCoefficients2,...fractions2,...color2],(c,u)=>({label:`\\${c}`,kind:t.languages.CompletionItemKind.Function,insertText:`${c}{$1}{$2}`,insertTextRules:t.languages.CompletionItemInsertTextRule.InsertAsSnippet,sortText:/[A-Z]/.test(c[0])?"1":"0"})),d=[{label:"\\begin",kind:t.languages.CompletionItemKind.Function,insertText:"begin{${1|"+envs.join(",")+`|}}
	$2
\\end{$1}`,insertTextRules:t.languages.CompletionItemInsertTextRule.InsertAsSnippet}];return{suggestions:[...o,...l,...s,...d]}}}}),t.languages.registerCompletionItemProvider("markdown",{triggerCharacters:["^"],provideCompletionItems:(n,r,a)=>{const i=n.getValueInRange({startLineNumber:1,startColumn:1,endLineNumber:r.lineNumber,endColumn:r.column});if(isNeedToUseClueIntellisense(i))return{suggestions:[{label:"RED",kind:t.languages.CompletionItemKind.Function,insertText:"RED",insertTextRules:t.languages.CompletionItemInsertTextRule.InsertAsSnippet,detail:"RED..."},{label:"PINK",kind:t.languages.CompletionItemKind.Function,insertText:"PINK",insertTextRules:t.languages.CompletionItemInsertTextRule.InsertAsSnippet,detail:"PINK..."}]}}}),t.languages.registerCompletionItemProvider("markdown",{provideCompletionItems:(n,r,a)=>{const i=n.getValueInRange({startLineNumber:1,startColumn:1,endLineNumber:r.lineNumber,endColumn:r.column});if(isNeedToUseCodeIntellisense(i))return{suggestions:[{label:"RED",kind:t.languages.CompletionItemKind.Function,insertText:"RED",insertTextRules:t.languages.CompletionItemInsertTextRule.InsertAsSnippet,detail:"RED..."}]}}})}function isNeedToUseLatexIntellisense(e){return!!(e[e.length-1]==="\\"&&isInLatexBlock(e))}function isInLatexBlock(e){return(e.match(/\$\$/g)?e.match(/\$\$/g).length%2===1:!1)||(e.match(/\$/g)?e.match(/\$/g).length%2===1:!1)}function isNeedToUseClueIntellisense(e){return e[e.length-1]==="^"}function isNeedToUseCodeIntellisense(e){return e.match(/\`\`\`js/g)?(window.monaco.editor.setModelLanguage(window.editor.getModel(),"javascript"),!0):(window.monaco.editor.setModelLanguage(window.editor.getModel(),"markdown"),!1)}function monacoFormat(e,t){t.languages.registerDocumentFormattingEditProvider("markdown",{provideDocumentFormattingEdits(n){let r=n.getValue();var a=e.getPosition();return prettier.format(r,{parser:"markdown",plugins:[parseMd]}).then(i=>{replaceMonacoAll(window.monaco,e,i),e.setPosition(a)}),[]}})}function getDeviceTyByProportion(){const e=document.documentElement.clientWidth,t=document.documentElement.clientHeight;return e/t>=1?"PC":"mobile"}function monacoMouseEvent(e,t){e.onContextMenu(n=>{setContextMenuClickPosition({posx:n.event.posx,posy:n.event.posy})})}function monacoClickEvent(e,t){e.onDidFocusEditorWidget(()=>{window._deco.clear()})}function monacoResizeHeightEvent(e){const t=()=>{e(Math.floor(window.innerHeight*.9))};window.addEventListener("resize",t)}function monacoScrollEvent(e,t){const n=debounce(()=>{syncScrollOnce(e)},20);e.onDidScrollChange(n)}function syncScrollOnce(e,t){if(getSettings().basic.syncScroll){const n=e.getVisibleRanges();if(n.length>0){const a=n[0].startLineNumber;syncScroll(a-1)}}}function syncScroll(e){const t=document.getElementById("view-area");if(!t)return;if(e===0){t.scrollTo({top:0,behavior:"smooth"});return}const n=document.querySelectorAll("#view-area [data-line]");let r=null,a=null,i=1/0,o=1/0,l=null;if(n.forEach(s=>{const c=parseInt(s.getAttribute("data-line")||"0",10)-e;c==0?l=s:(c<0&&Math.abs(c)<i&&(i=Math.abs(c),r=s),c>0&&c<o&&(o=c,a=s))}),l){t.scrollTo({top:l.offsetTop,behavior:"smooth"});return}if(!a){t.scrollTo({top:r.offsetTop,behavior:"smooth"});return}if(r&&a){const s=r.offsetTop,d=a.offsetTop,c=(e-(e-i))/(o+i),u=(d-s)*c+s;t.scrollTo({top:u,behavior:"smooth"})}}const React$4=window.React,useState=window.React.useState,version="0.45.0",cdnDomain={unpkg:["npm.onmicrosoft.cn","unpkg.com","npm.elemecdn.com"],jsDelivr:["jsd.onmicrosoft.cn","www.jsdelivr.com","cdn.jsdmirror.com"]},cdnLinks={unpkg:{cdn:`https://${cdnDomain.unpkg[0]}/monaco-editor@${version}/dev/vs`},jsDelivr:{cdn:`https://${cdnDomain.jsDelivr[2]}/npm/monaco-editor@${version}/dev/vs`}};try{loader.config({paths:{vs:cdnLinks.jsDelivr.cdn}})}catch(e){loader.config({paths:{vs:cdnLinks.jsDelivr.cdn}})}const files={"index.py":{name:"index.py",language:"python",value:""},"index.js":{name:"index.js",language:"javascript",value:"nihao"},"index.md":{name:"index.md",language:"markdown",value:""}},MonacoEditor=observer(function e(){const t=React$4.useRef(null),[n,r]=React$4.useState(!0),a=()=>{r(!1)},[i,o]=React$4.useState(640),[l,s]=React$4.useState(800),d=()=>{mdConverter(!0),setTimeout(()=>{u(g=>({...g,minimap:{enabled:!0}}))},300)},[c,u]=useState({fontSize:16,wordWrap:"on",formatOnType:!0,formatOnPaste:!1,fontLigatures:!0,autoSurround:"quotes",autoClosingQuotes:"always",smoothScrolling:!0,codeLens:!1,pasteAs:{enabled:!1,showPasteSelector:"never"},peekWidgetDefaultFocus:"tree",cursorSmoothCaretAnimation:"explicit",colorDecorators:!0,minimap:{enabled:!0},unicodeHighlight:{nonBasicASCII:!1,ambiguousCharacters:!1}}),[m,h]=useState("index.md"),f=files[m];function x(g){triggerConverterEvent(4)}function p(g,y){getDeviceTyByProportion()=="PC"&&o(document.getElementById("editor").clientWidth/2),s(document.getElementById("editor").clientHeight),y.languages.setLanguageConfiguration("markdown",{autoClosingPairs:[{open:"{",close:"}"},{open:"[",close:"]"},{open:"(",close:")"},{open:'"',close:'"'},{open:"'",close:"'",notIn:["string","comment"]},{open:"`",close:"`",notIn:["string","comment"]},{open:"/*",close:"*/",notIn:["string"]},{open:"？",close:"？",notIn:["string","comment"]}]}),y.languages.setMonarchTokensProvider("markdown",{tokenizer:{root:[[/\b(function|return|var)\b/,"keyword"],[/\|\|/,"string"],[/>>/,"string"],[/[{}]/,"delimiter"],[/[a-z_$][\w$]*/,"identifier"],[/"[^"]*"/,"string"],[/\d+/,"number"],[/[$$$$]/,"keyword"]]}})}function R(){}function b(g,y){window.editor=g,window.monaco=y,allInit(g,y,a),p(g,y),monacoPasteEvent(g),monacoKeyEvent(g,y),monacoSnippets(g,y),monacoFormat(g,y),monacoMouseEvent(g),monacoClickEvent(g),monacoScrollEvent(g),monacoResizeHeightEvent(s)}return React$4.createElement(React$4.Fragment,null,React$4.createElement("div",{ref:t,id:"monaco-editor",style:{width:i,height:"100%"}},React$4.createElement(ResizableBox,{className:"custom-resizable",width:i,height:l,draggableOpts:{grid:[5,15]},minConstraints:[100,l],onResizeStop:d,onResize:g=>{u(y=>({...y,minimap:{enabled:!1}})),o(g.x)},axis:"x"},React$4.createElement(Ft,{className:"monaco-editor-inner",height:"100%",width:i,theme:getTheme()==="light"?"vs-light":"vs-dark",path:f.name,defaultLanguage:f.language,defaultValue:f.value,onMount:b,onChange:x,options:c,beforeMount:R})),React$4.createElement(Backdrop,{sx:{color:"#fff",zIndex:g=>g.zIndex.drawer+1},open:n,onClick:a},React$4.createElement(CircularProgress,{color:"inherit"}))))}),React$3=window.React;function MdArea(){return React$3.createElement(React$3.Fragment,null,React$3.createElement(MonacoEditor,null))}const React$2=window.React,Suspense=window.React.Suspense,LazyEmojiPicker=React$2.lazy(()=>__vitePreload(()=>import("./EmojiPicker-27300153.js"),["./EmojiPicker-27300153.js","./@emoji-mart-57ee2b00.js","./mobx-react-1a77d2ab.js","./mobx-react-lite-15e39ab3.js","./use-sync-external-store-b84fba6b.js","./@mui-2be9fea0.js","./react-2b221fbb.js","./@babel-f8d566ba.js","./clsx-0839fdbe.js","./@emotion-d13e5fae.js","./hoist-non-react-statics-3f8ebaa8.js","./stylis-79144faa.js","./react-is-e5978b8b.js","./react-transition-group-bc100b23.js","./@popperjs-f3391c26.js","./prop-types-7395632d.js","./react-dom-d3bdc6a0.js","./@monaco-editor-38e7c7a5.js","./state-local-dd516420.js","./react-resizable-8f73e4ed.js","./react-draggable-b033082a.js","..\\f65e29ed.react-resizable.css"],import.meta.url));function enEvents(e){e&&enableFastKeyEvent()}const Body=observer(function e(){React$2.useState("");const t=React$2.useRef(null);return React$2.useEffect(()=>{enEvents(!0)},[]),React$2.createElement(React$2.Fragment,null,React$2.createElement("div",{style:{marginTop:"1.3vh"},id:"bodyTopBox"},React$2.createElement("div",{id:"editor",className:`${getTheme()=="light"?"theme-light":"theme-dark"} FLEX ROW`},React$2.createElement(MdArea,null),React$2.createElement("article",{id:"view-area-hidden",className:"hidden-pre"}),React$2.createElement("article",{ref:t,id:"view-area",className:`markdown-body ${getTheme()==="light"?"markdown-body-light":"markdown-body-dark"}`})),React$2.createElement("div",{id:"aboutBox"},React$2.createElement("div",{id:"markdownParser"},React$2.createElement("div",{id:"aboutMd",className:`aboutViewArea markdown-body ${getTheme()==="light"?"markdown-body-light":"markdown-body-dark"}`}))),React$2.createElement(Suspense,{fallback:React$2.createElement(React$2.Fragment,null)},React$2.createElement(LazyEmojiPicker,{open:getEmojiPickerState()==="on"}))))}),React$1=window.React,bothStyle={zIndex:{drawer:1300,modal:1200,appBar:1200}},lightTheme=createTheme({...bothStyle,palette:{primary:{main:blue[200],contrastText:"#fff378"},secondary:{main:green[500],contrastText:"pink"},info:{main:blue[200],contrastText:"#8B8A8A"},mode:"light"}}),darkTheme=createTheme({...bothStyle,palette:{primary:{main:blue[400],contrastText:"wheat"},secondary:{main:green[700],contrastText:"wheat"},info:{main:green[600],contrastText:"#8B8A8A"},mode:"dark"}}),App=observer(()=>(React$1.useEffect(()=>{kit.addStyle(`
    ::selection {
      border-radius: 5px;
      background-color: ${getTheme()==="light"?"#add6ff":"#636363"};
    }
    `)},[]),React$1.createElement(React$1.Fragment,null,React$1.createElement(ThemeProvider,{theme:getTheme()==="light"?lightTheme:darkTheme},React$1.createElement(CssBaseline,null),React$1.createElement(Box$1,{className:"FLEX COL App-top"},React$1.createElement(DrawerAppBar,null),React$1.createElement(Body,null)))))),React=window.React;client.createRoot(document.getElementById("root")).render(React.createElement(App,null));export{CustomizedButtons as C,IOSSwitch as I,getMdTextFromMonaco as a,getTheme as b,getSettings as c,normalMermaidTheme as d,exportAsImage as e,normalMermaidThemeMap as f,getRenderHTML as g,changeTheme as h,changeSettings as i,mdConverter as j,save as k,isSaved as l,myPrint as m,noteUseArco as n,changeFileManagerState as o,getContextMenuClickPosition as p,changeEmojiPickerState as q,insertTextMonacoAtCursor as r,speechLanguageMap as s,useImage as u};
